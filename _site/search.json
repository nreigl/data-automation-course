[
  {
    "objectID": "teaching_materials/intro.html#welcome",
    "href": "teaching_materials/intro.html#welcome",
    "title": "Automating Data Workflows",
    "section": "",
    "text": "A short hands-on course using real data from:\n\nStatistics Estonia\n\nECB / Euro Area via DBnomics"
  },
  {
    "objectID": "teaching_materials/intro.html#why-write-code-instead-of-using-excel",
    "href": "teaching_materials/intro.html#why-write-code-instead-of-using-excel",
    "title": "Automating Data Workflows",
    "section": "Why Write Code Instead of Using Excel?",
    "text": "Why Write Code Instead of Using Excel?\n\n✅ Repeatability: Run once, use forever.\n\n✅ Transparency: All steps are visible in the script.\n\n✅ Scalability: Works for 1 or 100 datasets.\n\n✅ Fewer Errors: Avoid manual mistakes.\n\n✅ Version Control: Track changes, collaborate easily."
  },
  {
    "objectID": "teaching_materials/intro.html#example-manual-vs.-automated",
    "href": "teaching_materials/intro.html#example-manual-vs.-automated",
    "title": "Automating Data Workflows",
    "section": "Example: Manual vs. Automated",
    "text": "Example: Manual vs. Automated\nManual Workflow (Excel):\n\nGo to website\n\nDownload Excel file\n\nOpen, clean, copy, paste\n\nRepeat for new data\n\n\nAutomated Workflow (R):\nlibrary(httr)\nlibrary(readr)\n\nurl &lt;- \"https://example.com/data.csv\"\ndata &lt;- read_csv(url)"
  },
  {
    "objectID": "teaching_materials/fetching.html#which-interfaces-to-use",
    "href": "teaching_materials/fetching.html#which-interfaces-to-use",
    "title": "Fetching and Visualizing Official Statistics with R",
    "section": "Which interfaces to use?",
    "text": "Which interfaces to use?\n\nPackages or set of classes and methods to read data and metadata documents through exchange frameworks\n\nUse R (or Python) packages to read data from APIs, databases, and web pages\n\nIndividual packages:\n\neurostat: Access data from Eurostat\nOECD: Access data from the OECD API\n\n\nGeneral-purpose packages:\n\nrdbnomics: Unified access to many economic databases (e.g. ECB, Eurostat, IMF, World Bank)"
  },
  {
    "objectID": "teaching_materials/fetching.html#how-to-fetch-data-using-dbnomics",
    "href": "teaching_materials/fetching.html#how-to-fetch-data-using-dbnomics",
    "title": "Fetching Data",
    "section": "How to fetch data (using DBnomics)",
    "text": "How to fetch data (using DBnomics)\n\nDBnomics is a database of databases\nIt provides a unified interface to access data from many sources\nfree platform to aggregate publicly-available economic data provided by national and international statistical institutions, but also by researchers and private companies\nOne website aggregating global data and one API\nData series are available upon release by the provider. Each revision is archived to build a real-time database.\nEach data series has a unique ID"
  },
  {
    "objectID": "teaching_materials/fetching.html#dbnomics",
    "href": "teaching_materials/fetching.html#dbnomics",
    "title": "Fetching and Visualizing Official Statistics with R",
    "section": "DBnomics",
    "text": "DBnomics\n\nDBnomics is a database of databases\n\nfree platform to aggregate publicly-available economic data provided by national and international statistical institutions, but also by researchers and private companies\nUnified interface to access data from many sources\nHarmonized data formats and metadata\nData series are available upon release by the provider.\nEach revision is archived to build a real-time database."
  },
  {
    "objectID": "teaching_materials/fetching.html#how-to-fetch-data-from-dbnomics-using-r",
    "href": "teaching_materials/fetching.html#how-to-fetch-data-from-dbnomics-using-r",
    "title": "Fetching and Visualizing Official Statistics with R",
    "section": "How to fetch data (from DBnomics using R)",
    "text": "How to fetch data (from DBnomics using R)\n\nDBnomics R client\n\n\n\ninstall.packages(\"rdbnomics\")\nlibrary(rdbnomics)"
  },
  {
    "objectID": "teaching_materials/fetching.html#example-fetch-unemployment-data-eurostat-using-the-rdbnomics-package",
    "href": "teaching_materials/fetching.html#example-fetch-unemployment-data-eurostat-using-the-rdbnomics-package",
    "title": "Fetching Data",
    "section": "Example: Fetch Unemployment Data (Eurostat) using the rdbnomics package",
    "text": "Example: Fetch Unemployment Data (Eurostat) using the rdbnomics package\n\nlibrary(rdbnomics)\nlibrary(tidyverse)\n\n- Assume we know exactly the series ID we want to fetch\n\nunemp &lt;- rdb(ids = \"Eurostat/ei_lmhr_m/M.PC_ACT.SA.LM-UN-T-TOT.EE\") # fetch data\n# Data Dimensions\nlength(colnames(unemp)) \n\n[1] 22\n\ncolnames(unemp)\n\n [1] \"@frequency\"                      \"dataset_code\"                   \n [3] \"dataset_name\"                    \"freq\"                           \n [5] \"geo\"                             \"Geopolitical entity (reporting)\"\n [7] \"indexed_at\"                      \"indic\"                          \n [9] \"Indicator\"                       \"observations_attributes\"        \n[11] \"original_period\"                 \"original_value\"                 \n[13] \"period\"                          \"provider_code\"                  \n[15] \"s_adj\"                           \"Seasonal adjustment\"            \n[17] \"series_code\"                     \"series_name\"                    \n[19] \"Time frequency\"                  \"unit\"                           \n[21] \"Unit of measure\"                 \"value\""
  },
  {
    "objectID": "teaching_materials/fetching.html#how-did-we-find-the-series-id",
    "href": "teaching_materials/fetching.html#how-did-we-find-the-series-id",
    "title": "Fetching and Visualizing Official Statistics with R",
    "section": "How did we find the series ID?",
    "text": "How did we find the series ID?\n\nGo to the DBnomics website\n\nPick a provider\nSearch for the data you want (dataset_code)\nClick on the series (series_code)\nCopy the series ID from the URL"
  },
  {
    "objectID": "teaching_materials/cleaning.html#which-interfaces-to-use",
    "href": "teaching_materials/cleaning.html#which-interfaces-to-use",
    "title": "Fetching Data",
    "section": "Which interfaces to use?",
    "text": "Which interfaces to use?\n\nPackages or set of classes and methods to read data and metadata documents through exchange frameworks\nUse R (or Python) packages to read data from APIs, databases, and web pages\nIndividual packages:\n\neurostat: Access data from Eurostat\nOECD: Access data from the OECD API\n\nGeneral-purpose packages:\n\nrdbnomics: Unified access to many economic databases (e.g. ECB, IMF, World Bank)"
  },
  {
    "objectID": "teaching_materials/cleaning.html#dbnomics",
    "href": "teaching_materials/cleaning.html#dbnomics",
    "title": "Fetching Data",
    "section": "DBnomics",
    "text": "DBnomics\n\nDBnomics is a database of databases\n\nfree platform to aggregate publicly-available economic data provided by national and international statistical institutions, but also by researchers and private companies\nUnified interface to access data from many sources\nOne website aggregating global data and one API\nData series are available upon release by the provider. Each revision is archived to build a real-time database.\nEach data series has a unique ID"
  },
  {
    "objectID": "teaching_materials/cleaning.html#how-to-fetch-data-from-dbnomics-using-r",
    "href": "teaching_materials/cleaning.html#how-to-fetch-data-from-dbnomics-using-r",
    "title": "Fetching Data",
    "section": "How to fetch data (from DBnomics using R)",
    "text": "How to fetch data (from DBnomics using R)\n\nDBnomics R client\nInstall the package:\n\n\ninstall.packages(\"rdbnomics\")\nlibrary(rdbnomics)"
  },
  {
    "objectID": "teaching_materials/cleaning.html#how-did-we-find-the-series-id",
    "href": "teaching_materials/cleaning.html#how-did-we-find-the-series-id",
    "title": "Fetching Data",
    "section": "How did we find the series ID?",
    "text": "How did we find the series ID?\n\nGo to the DBnomics website\n\nSearch for the data you want\n\nClick on the series\n\nCopy the series ID from the URL\n\n\nFetch the available datasets of a provider:\n\n\nrdb_datasets(provider_code = \"Eurostat\")\n\n$Eurostat\n              code\n            &lt;char&gt;\n   1:   aact_ali01\n   2:   aact_ali02\n   3:   aact_eaa01\n   4:   aact_eaa02\n   5:   aact_eaa03\n  ---             \n8289: yth_empl_120\n8290: yth_empl_130\n8291: yth_empl_130\n8292: yth_empl_140\n8293: yth_empl_140\n                                                                                        name\n                                                                                      &lt;char&gt;\n   1:       Agricultural labour input statistics: absolute figures (1 000 annual work units)\n   2:                                          Agricultural labour input statistics: indices\n   3:                           Economic accounts for agriculture - values at current prices\n   4:                               Economic accounts for agriculture - values at n-1 prices\n   5:             Economic accounts for agriculture - values at constant prices (2015 = 100)\n  ---                                                                                       \n8289:                 Youth long-term unemployment rate (12 months or longer) by sex and age\n8290: Youth long-term unemployment rate (12 months or longer) by sex, age and NUTS 2 regions\n8291:  Youth long-term unemployment rate (12 months or longer) by sex, age and NUTS 2 region\n8292:                                Youth unemployment ratio by sex, age and NUTS 2 regions\n8293:                                 Youth unemployment ratio by sex, age and NUTS 2 region\n\n\nFetch two series at once\nBalance of Payments (BOP) for Austria and Germany from the IMF\n\nbop &lt;- rdb(ids = c(\"IMF/BOP/A.FR.BCA_BP6_EUR\", \"IMF/BOP/A.DE.BCA_BP6_EUR\"))\nbop &lt;- rdb(\"IMF\", \"BOP\", mask = \"A.FR+DE.BCA_BP6_EUR\")\n\n\nbop %&gt;% count(`Reference Area`)\n\n   Reference Area     n\n           &lt;char&gt; &lt;int&gt;\n1:         France    15\n2:        Germany    26"
  },
  {
    "objectID": "teaching_materials/cleaning.html#fetch-two-series-from-different-datasets-of-different-providers",
    "href": "teaching_materials/cleaning.html#fetch-two-series-from-different-datasets-of-different-providers",
    "title": "Fetching Data",
    "section": "Fetch two series from different datasets of different providers",
    "text": "Fetch two series from different datasets of different providers\n\nunemp2 &lt;- rdb(ids = c(\"AMECO/ZUTN/EA19.1.0.0.0.ZUTN\", \"Eurostat/une_rt_q/Q.SA.Y15-24.PC_ACT.T.EA19\"))\n\n\n# See which providers and datasets are included\nunique(unemp2$provider_code)\n\n[1] \"AMECO\"    \"Eurostat\"\n\nunique(unemp2$dataset_code)\n\n[1] \"ZUTN\"     \"une_rt_q\"\n\nunique(unemp2$series_code)\n\n[1] \"EA19.1.0.0.0.ZUTN\"         \"Q.SA.Y15-24.PC_ACT.T.EA19\"\n\nunique(unemp2$`@frequency`)\n\n[1] \"annual\"    \"quarterly\""
  },
  {
    "objectID": "teaching_materials/fetching.html#fetch-two-series-from-different-datasets-of-different-providers",
    "href": "teaching_materials/fetching.html#fetch-two-series-from-different-datasets-of-different-providers",
    "title": "Fetching and Visualizing Official Statistics with R",
    "section": "Fetch two series from different datasets of different providers",
    "text": "Fetch two series from different datasets of different providers\n\nunemp2 &lt;- rdb(ids = c(\"AMECO/ZUTN/EA19.1.0.0.0.ZUTN\", \"Eurostat/une_rt_q/Q.SA.Y15-24.PC_ACT.T.EA19\"))\n\n\n# See which providers and datasets are included\ndim(unemp2)\n\n[1] 122  27\n\nunique(unemp2$provider_code)\n\n[1] \"AMECO\"    \"Eurostat\"\n\nunique(unemp2$dataset_code)\n\n[1] \"ZUTN\"     \"une_rt_q\"\n\nunique(unemp2$series_code)\n\n[1] \"EA19.1.0.0.0.ZUTN\"         \"Q.SA.Y15-24.PC_ACT.T.EA19\"\n\nunique(unemp2$`@frequency`)\n\n[1] \"annual\"    \"quarterly\"\n\nunique(unemp2$`Seasonal adjustment`)\n\n[1] NA                                                    \n[2] \"Seasonally adjusted data, not calendar adjusted data\""
  },
  {
    "objectID": "teaching_materials/fetching.html#fetch-two-series-from-different-datasets-of-different-providers-output",
    "href": "teaching_materials/fetching.html#fetch-two-series-from-different-datasets-of-different-providers-output",
    "title": "Fetching Data",
    "section": "Fetch two series from different datasets of different providers",
    "text": "Fetch two series from different datasets of different providers"
  },
  {
    "objectID": "teaching_materials/cleaning.html#slide-1-normal-bullets-no-incremental",
    "href": "teaching_materials/cleaning.html#slide-1-normal-bullets-no-incremental",
    "title": "Incremental Test",
    "section": "",
    "text": "First bullet\nSecond bullet\nThird bullet"
  },
  {
    "objectID": "teaching_materials/cleaning.html#slide-2-incremental-bullets-with-code-block",
    "href": "teaching_materials/cleaning.html#slide-2-incremental-bullets-with-code-block",
    "title": "Incremental Test",
    "section": "Slide 2 — Incremental bullets with code block",
    "text": "Slide 2 — Incremental bullets with code block\n\n\nWe need to install the package\n\nLoad the package\n\nUse it to fetch data\n\n\ninstall.packages(\"rdbnomics\")\nlibrary(rdbnomics)"
  },
  {
    "objectID": "teaching_materials/cleaning.html#next-slide",
    "href": "teaching_materials/cleaning.html#next-slide",
    "title": "Incremental Test",
    "section": "Next slide",
    "text": "Next slide"
  },
  {
    "objectID": "teaching_materials/cleaning.html#slide-2-incremental-bullets-code-shows-last",
    "href": "teaching_materials/cleaning.html#slide-2-incremental-bullets-code-shows-last",
    "title": "Incremental Test",
    "section": "Slide 2 — Incremental bullets + code shows last",
    "text": "Slide 2 — Incremental bullets + code shows last\n\nWe need to install the package\n\nLoad the package\n\nUse it to fetch data\n\n\n\ninstall.packages(\"rdbnomics\")\nlibrary(rdbnomics)"
  },
  {
    "objectID": "teaching_materials/fetching.html#package-for-this-tutorial",
    "href": "teaching_materials/fetching.html#package-for-this-tutorial",
    "title": "Fetching and Visualizing Official Statistics with R",
    "section": "Package for this tutorial",
    "text": "Package for this tutorial\n\nlibrary(quarto)\nlibrary(rdbnomics)\nlibrary(tidyverse)\nlibrary(plotly)\nlibrary(gt)"
  },
  {
    "objectID": "teaching_materials/fetching.html#fetch-two-series-at-once",
    "href": "teaching_materials/fetching.html#fetch-two-series-at-once",
    "title": "Fetching and Visualizing Official Statistics with R",
    "section": "Fetch two series at once",
    "text": "Fetch two series at once\n\nExample: Balance of Payments (BOP) for France and Germany from the IMF\n\n\nOption AOption B:Option C:\n\n\n\nby ID\n\n\nbop &lt;- rdb(ids = c(\"IMF/BOP/A.FR.BCA_BP6_EUR\", \"IMF/BOP/A.DE.BCA_BP6_EUR\"))\nbop %&gt;% count(`Reference Area`)\n\n   Reference Area     n\n           &lt;char&gt; &lt;int&gt;\n1:         France    15\n2:        Germany    26\n\n\n\n\n\nby Mask\n\n\nbop &lt;- rdb(provider = \"IMF\",\n           dataset_code =  \"BOP\",\n           mask = \"A.FR+DE.BCA_BP6_EUR\")\nbop %&gt;% count(`Reference Area`)\n\n   Reference Area     n\n           &lt;char&gt; &lt;int&gt;\n1:         France    15\n2:        Germany    26\n\n\n\n\n\nby Dimension\n\n⚠️You must specify all dimensions!\n\ndim &lt;- list(\n  REF_AREA = c(\"DE\", \"FR\"),\n  INDICATOR = c(\"BCA_BP6_EUR\"),\n  FREQ = \"A\"\n)\nbop &lt;- rdb(provider = \"IMF\", dataset_code = \"BOP\", dimensions = dim)\nbop %&gt;% count(`Reference Area`)\n\n   Reference Area     n\n           &lt;char&gt; &lt;int&gt;\n1:         France    15\n2:        Germany    26"
  },
  {
    "objectID": "teaching_materials/fetching.html#fetch-large-amounts-of-data",
    "href": "teaching_materials/fetching.html#fetch-large-amounts-of-data",
    "title": "Fetching and Visualizing Official Statistics with R",
    "section": "Fetch large amounts of data",
    "text": "Fetch large amounts of data\n\nSometimes you need to fetch many if not all dimensions of the data\nYou can wildcard dimension and post-filter\nExample: MFI Interest Rate Statistics from the ECB\n\nStart with a single series (Estonia, mortgage rates)\n\n\n\n\nmir_mortgage_ee &lt;- rdb(\"ECB\", \"MIR\", \"M.EE.B.A2C.A.R.A.2250.EUR.N\")\nunique(mir_mortgage_ee$series_name)\n\n[1] \"Monthly – Estonia – Deposit-taking corporations except the central bank (S.122) – Lending for house purchase excluding revolving loans and overdrafts, convenience and extended credit card debt – Total – Annualised agreed rate (AAR) / Narrowly defined effective rate (NDER) – Total – Households and non-profit institutions serving households (S.14 and S.15) – Euro – New business\""
  },
  {
    "objectID": "teaching_materials/fetching.html#wildcarding-dimensions",
    "href": "teaching_materials/fetching.html#wildcarding-dimensions",
    "title": "Fetching Data",
    "section": "Wildcarding dimensions",
    "text": "Wildcarding dimensions\n\nTo fetch multiple values for a dimension (e.g. countries), just remove the value from that position\n\nExample: remove \"EE\" to fetch all countries (REF_AREA)\n\n\n\n⚠️ This can take a while\n\nmir &lt;- rdb(\"ECB\", \"MIR\", \"M..B..A.R.A..EUR.N\")\nunique(mir$REF_AREA)\n\n [1] \"AT\" \"BE\" \"CY\" \"DE\" \"EE\" \"ES\" \"FI\" \"FR\" \"GR\" \"HR\" \"IE\" \"IT\" \"LT\" \"LU\" \"LV\"\n[16] \"MT\" \"NL\" \"PT\" \"SI\" \"SK\" \"U2\"\n\nunique(mir$BS_ITEM)\n\n [1] \"A2A\"  \"A2AC\" \"A2B\"  \"A2BC\" \"A2C\"  \"A2CC\" \"A2D\"  \"A2Z\"  \"A2Z1\" \"A2Z3\"\n[11] \"L21\"  \"L22\"  \"L23\"  \"L24\" \n\nunique(mir$`BS counterpart sector`)\n\n[1] \"Non-Financial corporations (S.11)\"                                           \n[2] \"Households and non-profit institutions serving households (S.14 and S.15)\"   \n[3] \"Households of which sole proprietors and unincorporated partnerships (SP/UP)\"\n[4] \"Non-Financial corporations and Households (S.11 and S.14 and S.15)\""
  },
  {
    "objectID": "teaching_materials/fetching.html#plot-interest-rates-by-country-type",
    "href": "teaching_materials/fetching.html#plot-interest-rates-by-country-type",
    "title": "Fetching Data",
    "section": "Plot interest rates by country & type",
    "text": "Plot interest rates by country & type\n\n\ncountry_list &lt;- paste(sort(unique(mir_filtered$REF_AREA)), collapse = \", \")\nitem_list &lt;- paste(unique(mir_filtered$BS_ITEM), collapse = \", \")\n\ncaption_text &lt;- paste(\n  \"Source: ECB / DBnomics — Dataset: MIR\",\n  paste0(\"\\nFiltered: REF_AREA in \", country_list, \"; BS_ITEM in \", item_list)\n)\n\n\np4 &lt;- ggplot(mir_filtered, aes(x = period, y = value, color = REF_AREA)) +\n  geom_line(linewidth = 0.8) +\n  facet_grid(~ `Balance sheet item`, labeller = label_wrap_gen(width = 30)) +\n  labs(\n    title = \"Interest Rates for Households and Firms\",\n    subtitle = \"Faceted by Loan Type\",\n    x = \"Date\", y = \"Percent\",\n    caption = caption_text\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"bottom\")\np4"
  },
  {
    "objectID": "teaching_materials/fetching.html#plot-interest-rates-by-country-type-1",
    "href": "teaching_materials/fetching.html#plot-interest-rates-by-country-type-1",
    "title": "Fetching Data",
    "section": "Plot interest rates by country & type",
    "text": "Plot interest rates by country & type\n\n\ncountry_list &lt;- paste(sort(unique(mir_filtered$REF_AREA)), collapse = \", \")\nitem_list &lt;- paste(unique(mir_filtered$BS_ITEM), collapse = \", \")\n\ncaption_text &lt;- paste(\n  \"Source: ECB / DBnomics — Dataset: MIR\",\n  paste0(\"\\nFiltered: REF_AREA in \", country_list, \"; BS_ITEM in \", item_list)\n)\n\n\np4 &lt;- ggplot(mir_filtered, aes(x = period, y = value, color = REF_AREA)) +\n  geom_line(linewidth = 0.8) +\n  facet_grid(~ `Balance sheet item`, labeller = label_wrap_gen(width = 30)) +\n  labs(\n    title = \"Interest Rates for Households and Firms\",\n    subtitle = \"Faceted by Loan Type\",\n    x = \"Date\", y = \"Percent\",\n    caption = caption_text\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"bottom\")\np4"
  },
  {
    "objectID": "teaching_materials/fetching.html#plot-interest-rates-by-country-type-1-output",
    "href": "teaching_materials/fetching.html#plot-interest-rates-by-country-type-1-output",
    "title": "Fetching Data",
    "section": "Plot interest rates by country & type",
    "text": "Plot interest rates by country & type"
  },
  {
    "objectID": "teaching_materials/fetching.html#plot-interest-rates-by-country-type-output",
    "href": "teaching_materials/fetching.html#plot-interest-rates-by-country-type-output",
    "title": "Fetching Data",
    "section": "Plot interest rates by country & type",
    "text": "Plot interest rates by country & type"
  },
  {
    "objectID": "teaching_materials/fetching.html#fetch-two-or-more-series-at-once",
    "href": "teaching_materials/fetching.html#fetch-two-or-more-series-at-once",
    "title": "Fetching and Visualizing Official Statistics with R",
    "section": "Fetch two (or more) series at once",
    "text": "Fetch two (or more) series at once\n\nExample: Balance of Payments (BOP) for France and Germany from the IMF for Current Account, Total, Net, Euros, Millions, Annual\n\n\n\nOption AOption B:Option C:\n\n\n\n# by ID\nbop &lt;- rdb(ids = c(\"IMF/BOP/A.FR.BCA_BP6_EUR\", \"IMF/BOP/A.DE.BCA_BP6_EUR\"))\nbop %&gt;% count(`Reference Area`)\n\n   Reference Area     n\n           &lt;char&gt; &lt;int&gt;\n1:         France    15\n2:        Germany    26\n\n\n\n\n\n# by Mask\nbop &lt;- rdb(provider = \"IMF\",\n           dataset_code =  \"BOP\",\n           mask = \"A.FR+DE.BCA_BP6_EUR\")\nbop %&gt;% count(`Reference Area`)\n\n   Reference Area     n\n           &lt;char&gt; &lt;int&gt;\n1:         France    15\n2:        Germany    26\n\n\n\n\n⚠️You must specify all dimensions!\n\n# by Dimension\ndim &lt;- list(\n  REF_AREA = c(\"DE\", \"FR\"),\n  INDICATOR = c(\"BCA_BP6_EUR\"),\n  FREQ = \"A\"\n)\nbop &lt;- rdb(provider = \"IMF\", dataset_code = \"BOP\", dimensions = dim)\nbop %&gt;% count(`Reference Area`)\n\n   Reference Area     n\n           &lt;char&gt; &lt;int&gt;\n1:         France    15\n2:        Germany    26"
  },
  {
    "objectID": "teaching_materials/slides_for_distribution_fetching.html#how-to-fetch-data-from-dbnomics-using-r",
    "href": "teaching_materials/slides_for_distribution_fetching.html#how-to-fetch-data-from-dbnomics-using-r",
    "title": "Fetching and Visualizing Official Statistics with R",
    "section": "How to fetch data (from DBnomics using R)",
    "text": "How to fetch data (from DBnomics using R)\n\nDBnomics R client\n\n\n\ninstall.packages(\"rdbnomics\")\nlibrary(rdbnomics)"
  },
  {
    "objectID": "teaching_materials/slides_for_distribution_fetching.html#fetch-two-or-more-series-at-once",
    "href": "teaching_materials/slides_for_distribution_fetching.html#fetch-two-or-more-series-at-once",
    "title": "Fetching and Visualizing Official Statistics with R",
    "section": "Fetch two (or more) series at once",
    "text": "Fetch two (or more) series at once\n\nExample: Balance of Payments (BOP) for France and Germany from the IMF for Current Account, Total, Net, Euros, Millions, Annual\n\n\n\nOption AOption B:Option C:\n\n\n\n# by ID\nbop &lt;- rdb(ids = c(\"IMF/BOP/A.FR.BCA_BP6_EUR\", \"IMF/BOP/A.DE.BCA_BP6_EUR\"))\nbop %&gt;% count(`Reference Area`)\n\n   Reference Area     n\n           &lt;char&gt; &lt;int&gt;\n1:         France    15\n2:        Germany    26\n\n\n\n\n\n# by Mask\nbop &lt;- rdb(provider = \"IMF\",\n           dataset_code =  \"BOP\",\n           mask = \"A.FR+DE.BCA_BP6_EUR\")\nbop %&gt;% count(`Reference Area`)\n\n   Reference Area     n\n           &lt;char&gt; &lt;int&gt;\n1:         France    15\n2:        Germany    26\n\n\n\n\n⚠️You must specify all dimensions!\n\n# by Dimension\ndim &lt;- list(\n  REF_AREA = c(\"DE\", \"FR\"),\n  INDICATOR = c(\"BCA_BP6_EUR\"),\n  FREQ = \"A\"\n)\nbop &lt;- rdb(provider = \"IMF\", dataset_code = \"BOP\", dimensions = dim)\nbop %&gt;% count(`Reference Area`)\n\n   Reference Area     n\n           &lt;char&gt; &lt;int&gt;\n1:         France    15\n2:        Germany    26"
  },
  {
    "objectID": "teaching_materials/slides_for_distribution_fetching.html#fetch-two-series-from-different-datasets-of-different-providers",
    "href": "teaching_materials/slides_for_distribution_fetching.html#fetch-two-series-from-different-datasets-of-different-providers",
    "title": "Fetching and Visualizing Official Statistics with R",
    "section": "Fetch two series from different datasets of different providers",
    "text": "Fetch two series from different datasets of different providers\n\nunemp2 &lt;- rdb(ids = c(\"AMECO/ZUTN/EA19.1.0.0.0.ZUTN\", \"Eurostat/une_rt_q/Q.SA.Y15-24.PC_ACT.T.EA19\"))\n\n\n# See which providers and datasets are included\ndim(unemp2)\n\n[1] 122  27\n\nunique(unemp2$provider_code)\n\n[1] \"AMECO\"    \"Eurostat\"\n\nunique(unemp2$dataset_code)\n\n[1] \"ZUTN\"     \"une_rt_q\"\n\nunique(unemp2$series_code)\n\n[1] \"EA19.1.0.0.0.ZUTN\"         \"Q.SA.Y15-24.PC_ACT.T.EA19\"\n\nunique(unemp2$`@frequency`)\n\n[1] \"annual\"    \"quarterly\"\n\nunique(unemp2$`Seasonal adjustment`)\n\n[1] NA                                                    \n[2] \"Seasonally adjusted data, not calendar adjusted data\""
  },
  {
    "objectID": "teaching_materials/slides_for_distribution_fetching.html#fetch-large-amounts-of-data",
    "href": "teaching_materials/slides_for_distribution_fetching.html#fetch-large-amounts-of-data",
    "title": "Fetching and Visualizing Official Statistics with R",
    "section": "Fetch large amounts of data",
    "text": "Fetch large amounts of data\n\nSometimes you need to fetch many if not all dimensions of the data\nYou can wildcard dimension and post-filter\nExample: MFI Interest Rate Statistics from the ECB\n\nStart with a single series (Estonia, mortgage rates)\n\n\n\n\nmir_mortgage_ee &lt;- rdb(\"ECB\", \"MIR\", \"M.EE.B.A2C.A.R.A.2250.EUR.N\")\nunique(mir_mortgage_ee$series_name)\n\n[1] \"Monthly – Estonia – Deposit-taking corporations except the central bank (S.122) – Lending for house purchase excluding revolving loans and overdrafts, convenience and extended credit card debt – Total – Annualised agreed rate (AAR) / Narrowly defined effective rate (NDER) – Total – Households and non-profit institutions serving households (S.14 and S.15) – Euro – New business\""
  },
  {
    "objectID": "teaching_materials/slides_for_distribution_fetching.html",
    "href": "teaching_materials/slides_for_distribution_fetching.html",
    "title": "Fetching and Visualizing Official Statistics with R",
    "section": "",
    "text": "Packages or set of classes and methods to read data and metadata documents through exchange frameworks\n\nUse R (or Python) packages to read data from APIs, databases, and web pages\n\nIndividual packages:\n\neurostat: Access data from Eurostat\nOECD: Access data from the OECD API\n\n\nGeneral-purpose packages:\n\nrdbnomics: Unified access to many economic databases (e.g. ECB, Eurostat, IMF, World Bank)\n\n\n\n\n\nInterface standards:\n\nSDMX: Statistical Data and Metadata Exchange format\npxweb: Access to data sources using the PX-Web API (e.g. Statistics Sweden, Statistics Estonia)\n\n\n\n\n\n\nDBnomics is a database of databases\n\nfree platform to aggregate publicly-available economic data provided by national and international statistical institutions, but also by researchers and private companies\nUnified interface to access data from many sources\nHarmonized data formats and metadata\nData series are available upon release by the provider\nEach revision is archived to build a real-time database\n\n\n\n\n\n\nDBnomics R client\n\n\n\ninstall.packages(\"rdbnomics\")\nlibrary(rdbnomics)\n\n\n\n\n\n\n📦 Fetching data (rdbnomics)\n🧹 Data wrangling and transformation (tidyverse)\n📊 Visualization (ggplot2, plotly)\n📋 Tabular summaries (gt)\n🧾 Building this presentation (quarto)\n\n\n\nlibrary(quarto)     # for compiling Quarto presentations\nlibrary(rdbnomics)  # for accessing economic data via DBnomics\nlibrary(tidyverse)  # dplyr, ggplot2, readr, etc.\nlibrary(plotly)     # interactive visualizations\nlibrary(gt)         # pretty tables\n\n\n\n\n\n\n\nAssume we know exactly the series ID we want to fetch\n\nUnemployment rate, ILO definition, total, Estonia, from Eurostat\n\n\n\n\nunemp &lt;- rdb(ids = \"Eurostat/ei_lmhr_m/M.PC_ACT.SA.LM-UN-T-TOT.EE\") # fetch data\n\n\n\n\nglimpse(unemp)\n\nRows: 296\nColumns: 22\n$ `@frequency`                      &lt;chr&gt; \"monthly\", \"monthly\", \"monthly\", \"mo…\n$ dataset_code                      &lt;chr&gt; \"ei_lmhr_m\", \"ei_lmhr_m\", \"ei_lmhr_m…\n$ dataset_name                      &lt;chr&gt; \"Unemployment rate (%) - monthly dat…\n$ freq                              &lt;chr&gt; \"M\", \"M\", \"M\", \"M\", \"M\", \"M\", \"M\", \"…\n$ geo                               &lt;chr&gt; \"EE\", \"EE\", \"EE\", \"EE\", \"EE\", \"EE\", …\n$ `Geopolitical entity (reporting)` &lt;chr&gt; \"Estonia\", \"Estonia\", \"Estonia\", \"Es…\n$ indexed_at                        &lt;dttm&gt; 2024-10-31 15:26:51, 2024-10-31 15:…\n$ indic                             &lt;chr&gt; \"LM-UN-T-TOT\", \"LM-UN-T-TOT\", \"LM-UN…\n$ Indicator                         &lt;chr&gt; \"Unemployment according to ILO defin…\n$ observations_attributes           &lt;chr&gt; \"OBS_FLAG,\", \"OBS_FLAG,\", \"OBS_FLAG,…\n$ original_period                   &lt;chr&gt; \"2000-02\", \"2000-03\", \"2000-04\", \"20…\n$ original_value                    &lt;chr&gt; \"14.9\", \"14.2\", \"14.5\", \"13.9\", \"14\"…\n$ period                            &lt;date&gt; 2000-02-01, 2000-03-01, 2000-04-01,…\n$ provider_code                     &lt;chr&gt; \"Eurostat\", \"Eurostat\", \"Eurostat\", …\n$ s_adj                             &lt;chr&gt; \"SA\", \"SA\", \"SA\", \"SA\", \"SA\", \"SA\", …\n$ `Seasonal adjustment`             &lt;chr&gt; \"Seasonally adjusted data, not calen…\n$ series_code                       &lt;chr&gt; \"M.PC_ACT.SA.LM-UN-T-TOT.EE\", \"M.PC_…\n$ series_name                       &lt;chr&gt; \"Monthly – Percentage of population …\n$ `Time frequency`                  &lt;chr&gt; \"Monthly\", \"Monthly\", \"Monthly\", \"Mo…\n$ unit                              &lt;chr&gt; \"PC_ACT\", \"PC_ACT\", \"PC_ACT\", \"PC_AC…\n$ `Unit of measure`                 &lt;chr&gt; \"Percentage of population in the lab…\n$ value                             &lt;dbl&gt; 14.9, 14.2, 14.5, 13.9, 14.0, 13.9, …\n\ncolnames(unemp)\n\n [1] \"@frequency\"                      \"dataset_code\"                   \n [3] \"dataset_name\"                    \"freq\"                           \n [5] \"geo\"                             \"Geopolitical entity (reporting)\"\n [7] \"indexed_at\"                      \"indic\"                          \n [9] \"Indicator\"                       \"observations_attributes\"        \n[11] \"original_period\"                 \"original_value\"                 \n[13] \"period\"                          \"provider_code\"                  \n[15] \"s_adj\"                           \"Seasonal adjustment\"            \n[17] \"series_code\"                     \"series_name\"                    \n[19] \"Time frequency\"                  \"unit\"                           \n[21] \"Unit of measure\"                 \"value\"                          \n\n\n\n\n# Extract source and series ID from the metadata\n(source_name &lt;- unique(unemp$dataset_code))  \n\n[1] \"ei_lmhr_m\"\n\n(provider_code &lt;- unique(unemp$provider_code))  \n\n[1] \"Eurostat\"\n\n(country_name &lt;- unique(unemp$`Geopolitical entity (reporting)`)  )\n\n[1] \"Estonia\"\n\n(series_id &lt;- unique(unemp$series_code))  \n\n[1] \"M.PC_ACT.SA.LM-UN-T-TOT.EE\"\n\n\n\n\n# Plot the data\np1 &lt;- ggplot(unemp, aes(x = period, y = value)) +\n  geom_line(color = \"steelblue\", linewidth = 1) +\n  labs(\n    title = paste(\"Unemployment Rate in \", country_name),\n    subtitle = paste(\"Monthly, seasonally adjusted —\", provider_code),\n    x = \"Date\", y = \"Percent\",\n    caption = paste(\"Source:\", provider_code, \"| Dataset:\", source_name, \"| ID:\", series_id)\n  ) +\n  theme_minimal()\np1\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplotly(p1)\n\n\n\n\n\n\n\n\n\n\nGo to the DBnomics website\n\nSearch directly for a series or pick a provider\nSearch for the data you want (dataset_code)\nClick on the series (series_code)\nCopy the series ID from the URL\n\n\n\n\nShow the available datasets of a provider:\n\n\n\nhead(rdb_datasets(provider_code = \"Eurostat\"))\n\n$Eurostat\n              code\n            &lt;char&gt;\n   1:   aact_ali01\n   2:   aact_ali02\n   3:   aact_eaa01\n   4:   aact_eaa02\n   5:   aact_eaa03\n  ---             \n8289: yth_empl_120\n8290: yth_empl_130\n8291: yth_empl_130\n8292: yth_empl_140\n8293: yth_empl_140\n                                                                                        name\n                                                                                      &lt;char&gt;\n   1:       Agricultural labour input statistics: absolute figures (1 000 annual work units)\n   2:                                          Agricultural labour input statistics: indices\n   3:                           Economic accounts for agriculture - values at current prices\n   4:                               Economic accounts for agriculture - values at n-1 prices\n   5:             Economic accounts for agriculture - values at constant prices (2015 = 100)\n  ---                                                                                       \n8289:                 Youth long-term unemployment rate (12 months or longer) by sex and age\n8290: Youth long-term unemployment rate (12 months or longer) by sex, age and NUTS 2 regions\n8291:  Youth long-term unemployment rate (12 months or longer) by sex, age and NUTS 2 region\n8292:                                Youth unemployment ratio by sex, age and NUTS 2 regions\n8293:                                 Youth unemployment ratio by sex, age and NUTS 2 region\n\n\n\n\n\nShow the dimensions of a dataset:\n\n\n\nhead(rdb_dimensions(provider_code = \"Eurostat\", dataset_code = \"ei_lmhr_m\"))\n\n$Eurostat\n$Eurostat$ei_lmhr_m\n$Eurostat$ei_lmhr_m$freq\n     freq Time frequency\n   &lt;char&gt;         &lt;char&gt;\n1:      M        Monthly\n\n$Eurostat$ei_lmhr_m$geo\n          geo           Geopolitical entity (reporting)\n       &lt;char&gt;                                    &lt;char&gt;\n 1:        AT                                   Austria\n 2:        BA                    Bosnia and Herzegovina\n 3:        BE                                   Belgium\n 4:        BG                                  Bulgaria\n 5:        CH                               Switzerland\n 6:        CY                                    Cyprus\n 7:        CZ                                   Czechia\n 8:        DE                                   Germany\n 9:        DK                                   Denmark\n10:      EA20      Euro area – 20 countries (from 2023)\n11:        EE                                   Estonia\n12:        EL                                    Greece\n13:        ES                                     Spain\n14: EU27_2020 European Union - 27 countries (from 2020)\n15:        FI                                   Finland\n16:        FR                                    France\n17:        HR                                   Croatia\n18:        HU                                   Hungary\n19:        IE                                   Ireland\n20:        IS                                   Iceland\n21:        IT                                     Italy\n22:        JP                                     Japan\n23:        LT                                 Lithuania\n24:        LU                                Luxembourg\n25:        LV                                    Latvia\n26:        MT                                     Malta\n27:        NL                               Netherlands\n28:        NO                                    Norway\n29:        PL                                    Poland\n30:        PT                                  Portugal\n31:        RO                                   Romania\n32:        SE                                    Sweden\n33:        SI                                  Slovenia\n34:        SK                                  Slovakia\n35:        TR                                   Türkiye\n36:        UK                            United Kingdom\n37:        US                             United States\n          geo           Geopolitical entity (reporting)\n\n$Eurostat$ei_lmhr_m$indic\n          indic\n         &lt;char&gt;\n1: LM-UN-F-GT25\n2: LM-UN-F-LE25\n3:  LM-UN-F-TOT\n4: LM-UN-M-GT25\n5: LM-UN-M-LE25\n6:  LM-UN-M-TOT\n7: LM-UN-T-GT25\n8: LM-UN-T-LE25\n9:  LM-UN-T-TOT\n                                                             Indicator\n                                                                &lt;char&gt;\n1:  Unemployment according to ILO definition - over 25 years - females\n2: Unemployment according to ILO definition - under 25 years - females\n3:                  Unemployment according to ILO definition - females\n4:    Unemployment according to ILO definition - over 25 years - males\n5:   Unemployment according to ILO definition - under 25 years - males\n6:                    Unemployment according to ILO definition - males\n7:    Unemployment according to ILO definition - over 25 years - total\n8:   Unemployment according to ILO definition - under 25 years - total\n9:                    Unemployment according to ILO definition - total\n\n$Eurostat$ei_lmhr_m$s_adj\n    s_adj\n   &lt;char&gt;\n1:    NSA\n2:     SA\n                                                             Seasonal adjustment\n                                                                          &lt;char&gt;\n1: Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data)\n2:                          Seasonally adjusted data, not calendar adjusted data\n\n$Eurostat$ei_lmhr_m$unit\n     unit                              Unit of measure\n   &lt;char&gt;                                       &lt;char&gt;\n1: PC_ACT Percentage of population in the labour force\n\n\n\n\n\nQuery to filter/select series from a provider’s dataset\n\n\n\nhead(rdb_series(\n  provider = \"Eurostat\",\n  dataset_code = \"ei_lmhr_m\",\n  query = \"United Kingdom\"\n))\n\n$Eurostat\n$Eurostat$ei_lmhr_m\n                     series_code\n                          &lt;char&gt;\n 1: M.PC_ACT.NSA.LM-UN-F-GT25.UK\n 2: M.PC_ACT.NSA.LM-UN-F-LE25.UK\n 3:  M.PC_ACT.NSA.LM-UN-F-TOT.UK\n 4: M.PC_ACT.NSA.LM-UN-M-GT25.UK\n 5: M.PC_ACT.NSA.LM-UN-M-LE25.UK\n 6:  M.PC_ACT.NSA.LM-UN-M-TOT.UK\n 7: M.PC_ACT.NSA.LM-UN-T-GT25.UK\n 8: M.PC_ACT.NSA.LM-UN-T-LE25.UK\n 9:  M.PC_ACT.NSA.LM-UN-T-TOT.UK\n10:  M.PC_ACT.SA.LM-UN-F-GT25.UK\n11:  M.PC_ACT.SA.LM-UN-F-LE25.UK\n12:   M.PC_ACT.SA.LM-UN-F-TOT.UK\n13:  M.PC_ACT.SA.LM-UN-M-GT25.UK\n14:  M.PC_ACT.SA.LM-UN-M-LE25.UK\n15:   M.PC_ACT.SA.LM-UN-M-TOT.UK\n16:  M.PC_ACT.SA.LM-UN-T-GT25.UK\n17:  M.PC_ACT.SA.LM-UN-T-LE25.UK\n18:   M.PC_ACT.SA.LM-UN-T-TOT.UK\n                                                                                                                                                                                                                      series_name\n                                                                                                                                                                                                                           &lt;char&gt;\n 1:  Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - over 25 years - females – United Kingdom\n 2: Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - under 25 years - females – United Kingdom\n 3:                  Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - females – United Kingdom\n 4:    Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - over 25 years - males – United Kingdom\n 5:   Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - under 25 years - males – United Kingdom\n 6:                    Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - males – United Kingdom\n 7:    Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - over 25 years - total – United Kingdom\n 8:   Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - under 25 years - total – United Kingdom\n 9:                    Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - total – United Kingdom\n10:                           Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - over 25 years - females – United Kingdom\n11:                          Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - under 25 years - females – United Kingdom\n12:                                           Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - females – United Kingdom\n13:                             Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - over 25 years - males – United Kingdom\n14:                            Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - under 25 years - males – United Kingdom\n15:                                             Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - males – United Kingdom\n16:                             Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - over 25 years - total – United Kingdom\n17:                            Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - under 25 years - total – United Kingdom\n18:                                             Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - total – United Kingdom\n\n\n\n\n\n\n\n\nExample: Balance of Payments (BOP) for France and Germany from the IMF for Current Account, Total, Net, Euros, Millions, Annual\n\n\n\nOption AOption B:Option C:\n\n\n\n# by ID\nbop &lt;- rdb(ids = c(\"IMF/BOP/A.FR.BCA_BP6_EUR\", \"IMF/BOP/A.DE.BCA_BP6_EUR\"))\nbop %&gt;% count(`Reference Area`)\n\n   Reference Area     n\n           &lt;char&gt; &lt;int&gt;\n1:         France    15\n2:        Germany    26\n\n\n\n\n\n# by Mask\nbop &lt;- rdb(provider = \"IMF\",\n           dataset_code =  \"BOP\",\n           mask = \"A.FR+DE.BCA_BP6_EUR\")\nbop %&gt;% count(`Reference Area`)\n\n   Reference Area     n\n           &lt;char&gt; &lt;int&gt;\n1:         France    15\n2:        Germany    26\n\n\n\n\n⚠️You must specify all dimensions!\n\n# by Dimension\ndim &lt;- list(\n  REF_AREA = c(\"DE\", \"FR\"),\n  INDICATOR = c(\"BCA_BP6_EUR\"),\n  FREQ = \"A\"\n)\nbop &lt;- rdb(provider = \"IMF\", dataset_code = \"BOP\", dimensions = dim)\nbop %&gt;% count(`Reference Area`)\n\n   Reference Area     n\n           &lt;char&gt; &lt;int&gt;\n1:         France    15\n2:        Germany    26\n\n\n\n\n\n\n\n\n# Line plot with color by country\np2 &lt;- ggplot(bop, aes(x = period, y = value, color = `Reference Area`)) +\n  geom_step(linewidth = 1) +\n  labs(\n    title = \"Balance of Payments (BCA, EUR)\",\n    subtitle = \"France vs Germany — Annual\",\n    x = \"Year\",\n    y = \"EUR (Millions)\",\n    caption = \"Source: IMF / DBnomics\"\n  ) +\n  theme_minimal()\np2\n\n\n\n\n\n\n\n\n\n\n\n\nunemp2 &lt;- rdb(ids = c(\"AMECO/ZUTN/EA19.1.0.0.0.ZUTN\", \"Eurostat/une_rt_q/Q.SA.Y15-24.PC_ACT.T.EA19\"))\n\n\n# See which providers and datasets are included\ndim(unemp2)\n\n[1] 122  27\n\nunique(unemp2$provider_code)\n\n[1] \"AMECO\"    \"Eurostat\"\n\nunique(unemp2$dataset_code)\n\n[1] \"ZUTN\"     \"une_rt_q\"\n\nunique(unemp2$series_code)\n\n[1] \"EA19.1.0.0.0.ZUTN\"         \"Q.SA.Y15-24.PC_ACT.T.EA19\"\n\nunique(unemp2$`@frequency`)\n\n[1] \"annual\"    \"quarterly\"\n\nunique(unemp2$`Seasonal adjustment`)\n\n[1] NA                                                    \n[2] \"Seasonally adjusted data, not calendar adjusted data\"\n\n\n\n\n# Summarize coverage and data availability\nunemp2_summary &lt;- unemp2 %&gt;%\n  group_by(series_code) %&gt;%\n  summarize(\n    provider = first(provider_code),\n    dataset = first(dataset_code),\n    start_all = min(period, na.rm = TRUE),\n    end_all = max(period, na.rm = TRUE),\n    start_data = min(period[!is.na(value)]),\n    end_data = max(period[!is.na(value)]),\n    n_obs = sum(!is.na(value)),\n    .groups = \"drop\"\n  )\n\n\n\nunemp2_summary_table &lt;- unemp2_summary |&gt; \ngt() %&gt;%\n  tab_header(\n    title = \"Time Coverage and Non-Missing Observations\",\n    subtitle = \"For Each Series from AMECO and Eurostat\"\n  ) %&gt;%\n  cols_label(\n    series_code = \"Series ID\",\n    provider = \"Provider\",\n    dataset = \"Dataset\",\n    start_all = \"Start (all)\",\n    end_all = \"End (all)\",\n    start_data = \"Start (non-NA)\",\n    end_data = \"End (non-NA)\",\n    n_obs = \"# Obs\"\n  ) %&gt;%\n  fmt_date(\n    columns = c(start_all, end_all, start_data, end_data),\n    date_style = \"iso\"\n  ) %&gt;%\n  tab_options(\n    table.width = pct(100),\n    column_labels.font.weight = \"bold\"\n  )\n\n\n\nunemp2_summary_table\n\n\n\n\n\n\n\nTime Coverage and Non-Missing Observations\n\n\nFor Each Series from AMECO and Eurostat\n\n\nSeries ID\nProvider\nDataset\nStart (all)\nEnd (all)\nStart (non-NA)\nEnd (non-NA)\n# Obs\n\n\n\n\nEA19.1.0.0.0.ZUTN\nAMECO\nZUTN\n1960-01-01\n2026-01-01\n1997-01-01\n2026-01-01\n30\n\n\nQ.SA.Y15-24.PC_ACT.T.EA19\nEurostat\nune_rt_q\n2009-01-01\n2022-07-01\n2009-01-01\n2022-07-01\n55\n\n\n\n\n\n\n\n\n\n# Metadata vectors\nproviders &lt;- unique(unemp2$provider_code)\ndatasets &lt;- unique(unemp2$dataset_code)\nseries_ids &lt;- unique(unemp2$series_code)\n\n\n# Create a label that combines dataset + series ID\nunemp2_clean &lt;- unemp2 %&gt;%\n  drop_na(value) %&gt;%\n  mutate(label = case_when(\n    series_code == \"EA19.1.0.0.0.ZUTN\" ~ \"Total, AMECO\",\n    series_code == \"Q.SA.Y15-24.PC_ACT.T.EA19\" ~ \"Youth (15–24), Eurostat\",\n    TRUE ~ series_code\n  ))\n\n\n\np3 &lt;- ggplot(unemp2_clean, aes(x = period, y = value, color = label)) +\n  geom_line(linewidth = 1) +\n  labs(\n    title = \"Unemployment Rates from Multiple Sources (EA19)\",\n    subtitle = \"AMECO and Eurostat — Different definitions\",\n    x = \"Year\", y = \"Percent\",\n    caption = paste(\"Series IDs:\", paste(unique(unemp2_clean$series_code), collapse = \" | \"))\n  ) +\n  theme_minimal()\np3\n\n\n\n\n\n\n\n\n\n\n\n\nSometimes you need to fetch many if not all dimensions of the data\nYou can wildcard dimension and post-filter\nExample: MFI Interest Rate Statistics from the ECB\n\nStart with a single series (Estonia, mortgage rates)\n\n\n\n\nmir_mortgage_ee &lt;- rdb(\"ECB\", \"MIR\", \"M.EE.B.A2C.A.R.A.2250.EUR.N\")\nunique(mir_mortgage_ee$series_name)\n\n[1] \"Monthly – Estonia – Deposit-taking corporations except the central bank (S.122) – Lending for house purchase excluding revolving loans and overdrafts, convenience and extended credit card debt – Total – Annualised agreed rate (AAR) / Narrowly defined effective rate (NDER) – Total – Households and non-profit institutions serving households (S.14 and S.15) – Euro – New business\"\n\n\n\n\n\n\n\nTo fetch multiple values for a dimension (e.g. countries), just remove the value from that position\n\nExample: remove \"EE\" to fetch all countries (REF_AREA)\n\n\n\n⚠️ This can take a while\n\n# mir_mortgage_ee &lt;- rdb(\"ECB\", \"MIR\", \"M.EE.B.A2C.A.R.A.2250.EUR.N\")\nmir &lt;- rdb(\"ECB\", \"MIR\", \"M..B..A.R.A..EUR.N\")\nunique(mir$REF_AREA)\n\n [1] \"AT\" \"BE\" \"CY\" \"DE\" \"EE\" \"ES\" \"FI\" \"FR\" \"GR\" \"HR\" \"IE\" \"IT\" \"LT\" \"LU\" \"LV\"\n[16] \"MT\" \"NL\" \"PT\" \"SI\" \"SK\" \"U2\"\n\nunique(mir$BS_ITEM)\n\n [1] \"A2A\"  \"A2AC\" \"A2B\"  \"A2BC\" \"A2C\"  \"A2CC\" \"A2D\"  \"A2Z\"  \"A2Z1\" \"A2Z3\"\n[11] \"L21\"  \"L22\"  \"L23\"  \"L24\" \n\nunique(mir$`BS counterpart sector`)\n\n[1] \"Non-Financial corporations (S.11)\"                                           \n[2] \"Households and non-profit institutions serving households (S.14 and S.15)\"   \n[3] \"Households of which sole proprietors and unincorporated partnerships (SP/UP)\"\n[4] \"Non-Financial corporations and Households (S.11 and S.14 and S.15)\"          \n\n\n\n\n\n\n\n\nFilter Estonia, Latvia and Lithuania\nKeep only selected BS items (loan categories)\n\n\n\n# Filter by BS_ITEM and countries\nmir_filtered &lt;- mir %&gt;%\n  filter(\n    REF_AREA %in% c(\"EE\", \"LV\", \"LT\"),\n    BS_ITEM %in% c(\"A2I\", \"A2C\", \"A2B\", \"A2J\", \"A2A\")\n  )\n\n\n\n\n\n\n\n\ncountry_list &lt;- paste(sort(unique(mir_filtered$REF_AREA)), collapse = \", \")\nitem_list &lt;- paste(unique(mir_filtered$BS_ITEM), collapse = \", \")\n\ncaption_text &lt;- paste(\n  \"Source: ECB / DBnomics — Dataset code: MIR\",\n  paste0(\"\\nFiltered: REF_AREA in \", country_list, \"; BS_ITEM in \", item_list)\n)\n\nmir_filtered &lt;- mir_filtered %&gt;%\n  mutate(facet_label = paste0(`BS counterpart sector`, \".\\n\\n\", `Balance sheet item`))\n\np4 &lt;- ggplot(mir_filtered, aes(x = period, y = value, color = REF_AREA)) +\n  geom_line(linewidth = 0.8) +\n  facet_wrap(~ facet_label, labeller = label_wrap_gen(width = 30), ncol = 3) +\n  labs(\n    title = \"Interest Rates for Households and Firms\",\n    subtitle = \"Faceted by Loan Type and Borrower Sector\",\n    x = \"Date\", y = \"Percent\",\n    caption = caption_text\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"bottom\")\np4"
  },
  {
    "objectID": "teaching_materials/page_for_distribution_fetching.html",
    "href": "teaching_materials/page_for_distribution_fetching.html",
    "title": "Fetching and Visualizing Official Statistics with R",
    "section": "",
    "text": "Packages or set of classes and methods to read data and metadata documents through exchange frameworks\n\nUse R (or Python) packages to read data from APIs, databases, and web pages\n\nIndividual packages:\n\neurostat: Access data from Eurostat\nOECD: Access data from the OECD API\n\n\nGeneral-purpose packages:\n\nrdbnomics: Unified access to many economic databases (e.g. ECB, Eurostat, IMF, World Bank)\n\n\n\n\n\nInterface standards:\n\nSDMX: Statistical Data and Metadata Exchange format\npxweb: Access to data sources using the PX-Web API (e.g. Statistics Sweden, Statistics Estonia)\n\n\n\n\n\n\nDBnomics is a database of databases\n\nfree platform to aggregate publicly-available economic data provided by national and international statistical institutions, but also by researchers and private companies\nUnified interface to access data from many sources\nHarmonized data formats and metadata\nData series are available upon release by the provider\nEach revision is archived to build a real-time database\n\n\n\n\n\n\nDBnomics R client\n\n\n\ninstall.packages(\"rdbnomics\")\nlibrary(rdbnomics)\n\n\n\n\n\n\n📦 Fetching data (rdbnomics)\n🧹 Data wrangling and transformation (tidyverse)\n📊 Visualization (ggplot2, plotly)\n📋 Tabular summaries (gt)\n🧾 Building this presentation (quarto)\n\n\n\nlibrary(quarto)     # for compiling Quarto presentations\nlibrary(rdbnomics)  # for accessing economic data via DBnomics\nlibrary(tidyverse)  # dplyr, ggplot2, readr, etc.\nlibrary(plotly)     # interactive visualizations\nlibrary(gt)         # pretty tables\n\n\n\n\n\n\n\nAssume we know exactly the series ID we want to fetch\n\nUnemployment rate, ILO definition, total, Estonia, from Eurostat\n\n\n\n\nunemp &lt;- rdb(ids = \"Eurostat/ei_lmhr_m/M.PC_ACT.SA.LM-UN-T-TOT.EE\") # fetch data\n\n\n\n\nglimpse(unemp)\n\nRows: 296\nColumns: 22\n$ `@frequency`                      &lt;chr&gt; \"monthly\", \"monthly\", \"monthly\", \"mo…\n$ dataset_code                      &lt;chr&gt; \"ei_lmhr_m\", \"ei_lmhr_m\", \"ei_lmhr_m…\n$ dataset_name                      &lt;chr&gt; \"Unemployment rate (%) - monthly dat…\n$ freq                              &lt;chr&gt; \"M\", \"M\", \"M\", \"M\", \"M\", \"M\", \"M\", \"…\n$ geo                               &lt;chr&gt; \"EE\", \"EE\", \"EE\", \"EE\", \"EE\", \"EE\", …\n$ `Geopolitical entity (reporting)` &lt;chr&gt; \"Estonia\", \"Estonia\", \"Estonia\", \"Es…\n$ indexed_at                        &lt;dttm&gt; 2024-10-31 15:26:51, 2024-10-31 15:…\n$ indic                             &lt;chr&gt; \"LM-UN-T-TOT\", \"LM-UN-T-TOT\", \"LM-UN…\n$ Indicator                         &lt;chr&gt; \"Unemployment according to ILO defin…\n$ observations_attributes           &lt;chr&gt; \"OBS_FLAG,\", \"OBS_FLAG,\", \"OBS_FLAG,…\n$ original_period                   &lt;chr&gt; \"2000-02\", \"2000-03\", \"2000-04\", \"20…\n$ original_value                    &lt;chr&gt; \"14.9\", \"14.2\", \"14.5\", \"13.9\", \"14\"…\n$ period                            &lt;date&gt; 2000-02-01, 2000-03-01, 2000-04-01,…\n$ provider_code                     &lt;chr&gt; \"Eurostat\", \"Eurostat\", \"Eurostat\", …\n$ s_adj                             &lt;chr&gt; \"SA\", \"SA\", \"SA\", \"SA\", \"SA\", \"SA\", …\n$ `Seasonal adjustment`             &lt;chr&gt; \"Seasonally adjusted data, not calen…\n$ series_code                       &lt;chr&gt; \"M.PC_ACT.SA.LM-UN-T-TOT.EE\", \"M.PC_…\n$ series_name                       &lt;chr&gt; \"Monthly – Percentage of population …\n$ `Time frequency`                  &lt;chr&gt; \"Monthly\", \"Monthly\", \"Monthly\", \"Mo…\n$ unit                              &lt;chr&gt; \"PC_ACT\", \"PC_ACT\", \"PC_ACT\", \"PC_AC…\n$ `Unit of measure`                 &lt;chr&gt; \"Percentage of population in the lab…\n$ value                             &lt;dbl&gt; 14.9, 14.2, 14.5, 13.9, 14.0, 13.9, …\n\ncolnames(unemp)\n\n [1] \"@frequency\"                      \"dataset_code\"                   \n [3] \"dataset_name\"                    \"freq\"                           \n [5] \"geo\"                             \"Geopolitical entity (reporting)\"\n [7] \"indexed_at\"                      \"indic\"                          \n [9] \"Indicator\"                       \"observations_attributes\"        \n[11] \"original_period\"                 \"original_value\"                 \n[13] \"period\"                          \"provider_code\"                  \n[15] \"s_adj\"                           \"Seasonal adjustment\"            \n[17] \"series_code\"                     \"series_name\"                    \n[19] \"Time frequency\"                  \"unit\"                           \n[21] \"Unit of measure\"                 \"value\"                          \n\n\n\n\n# Extract source and series ID from the metadata\n(source_name &lt;- unique(unemp$dataset_code))  \n\n[1] \"ei_lmhr_m\"\n\n(provider_code &lt;- unique(unemp$provider_code))  \n\n[1] \"Eurostat\"\n\n(country_name &lt;- unique(unemp$`Geopolitical entity (reporting)`)  )\n\n[1] \"Estonia\"\n\n(series_id &lt;- unique(unemp$series_code))  \n\n[1] \"M.PC_ACT.SA.LM-UN-T-TOT.EE\"\n\n\n\n\n# Plot the data\np1 &lt;- ggplot(unemp, aes(x = period, y = value)) +\n  geom_line(color = \"steelblue\", linewidth = 1) +\n  labs(\n    title = paste(\"Unemployment Rate in \", country_name),\n    subtitle = paste(\"Monthly, seasonally adjusted —\", provider_code),\n    x = \"Date\", y = \"Percent\",\n    caption = paste(\"Source:\", provider_code, \"| Dataset:\", source_name, \"| ID:\", series_id)\n  ) +\n  theme_minimal()\np1\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplotly(p1)\n\n\n\n\n\n\n\n\n\n\nGo to the DBnomics website\n\nSearch directly for a series or pick a provider\nSearch for the data you want (dataset_code)\nClick on the series (series_code)\nCopy the series ID from the URL\n\n\n\n\nShow the available datasets of a provider:\n\n\n\nhead(rdb_datasets(provider_code = \"Eurostat\"))\n\n$Eurostat\n              code\n            &lt;char&gt;\n   1:   aact_ali01\n   2:   aact_ali02\n   3:   aact_eaa01\n   4:   aact_eaa02\n   5:   aact_eaa03\n  ---             \n8289: yth_empl_120\n8290: yth_empl_130\n8291: yth_empl_130\n8292: yth_empl_140\n8293: yth_empl_140\n                                                                                        name\n                                                                                      &lt;char&gt;\n   1:       Agricultural labour input statistics: absolute figures (1 000 annual work units)\n   2:                                          Agricultural labour input statistics: indices\n   3:                           Economic accounts for agriculture - values at current prices\n   4:                               Economic accounts for agriculture - values at n-1 prices\n   5:             Economic accounts for agriculture - values at constant prices (2015 = 100)\n  ---                                                                                       \n8289:                 Youth long-term unemployment rate (12 months or longer) by sex and age\n8290: Youth long-term unemployment rate (12 months or longer) by sex, age and NUTS 2 regions\n8291:  Youth long-term unemployment rate (12 months or longer) by sex, age and NUTS 2 region\n8292:                                Youth unemployment ratio by sex, age and NUTS 2 regions\n8293:                                 Youth unemployment ratio by sex, age and NUTS 2 region\n\n\n\n\n\nShow the dimensions of a dataset:\n\n\n\nhead(rdb_dimensions(provider_code = \"Eurostat\", dataset_code = \"ei_lmhr_m\"))\n\n$Eurostat\n$Eurostat$ei_lmhr_m\n$Eurostat$ei_lmhr_m$freq\n     freq Time frequency\n   &lt;char&gt;         &lt;char&gt;\n1:      M        Monthly\n\n$Eurostat$ei_lmhr_m$geo\n          geo           Geopolitical entity (reporting)\n       &lt;char&gt;                                    &lt;char&gt;\n 1:        AT                                   Austria\n 2:        BA                    Bosnia and Herzegovina\n 3:        BE                                   Belgium\n 4:        BG                                  Bulgaria\n 5:        CH                               Switzerland\n 6:        CY                                    Cyprus\n 7:        CZ                                   Czechia\n 8:        DE                                   Germany\n 9:        DK                                   Denmark\n10:      EA20      Euro area – 20 countries (from 2023)\n11:        EE                                   Estonia\n12:        EL                                    Greece\n13:        ES                                     Spain\n14: EU27_2020 European Union - 27 countries (from 2020)\n15:        FI                                   Finland\n16:        FR                                    France\n17:        HR                                   Croatia\n18:        HU                                   Hungary\n19:        IE                                   Ireland\n20:        IS                                   Iceland\n21:        IT                                     Italy\n22:        JP                                     Japan\n23:        LT                                 Lithuania\n24:        LU                                Luxembourg\n25:        LV                                    Latvia\n26:        MT                                     Malta\n27:        NL                               Netherlands\n28:        NO                                    Norway\n29:        PL                                    Poland\n30:        PT                                  Portugal\n31:        RO                                   Romania\n32:        SE                                    Sweden\n33:        SI                                  Slovenia\n34:        SK                                  Slovakia\n35:        TR                                   Türkiye\n36:        UK                            United Kingdom\n37:        US                             United States\n          geo           Geopolitical entity (reporting)\n\n$Eurostat$ei_lmhr_m$indic\n          indic\n         &lt;char&gt;\n1: LM-UN-F-GT25\n2: LM-UN-F-LE25\n3:  LM-UN-F-TOT\n4: LM-UN-M-GT25\n5: LM-UN-M-LE25\n6:  LM-UN-M-TOT\n7: LM-UN-T-GT25\n8: LM-UN-T-LE25\n9:  LM-UN-T-TOT\n                                                             Indicator\n                                                                &lt;char&gt;\n1:  Unemployment according to ILO definition - over 25 years - females\n2: Unemployment according to ILO definition - under 25 years - females\n3:                  Unemployment according to ILO definition - females\n4:    Unemployment according to ILO definition - over 25 years - males\n5:   Unemployment according to ILO definition - under 25 years - males\n6:                    Unemployment according to ILO definition - males\n7:    Unemployment according to ILO definition - over 25 years - total\n8:   Unemployment according to ILO definition - under 25 years - total\n9:                    Unemployment according to ILO definition - total\n\n$Eurostat$ei_lmhr_m$s_adj\n    s_adj\n   &lt;char&gt;\n1:    NSA\n2:     SA\n                                                             Seasonal adjustment\n                                                                          &lt;char&gt;\n1: Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data)\n2:                          Seasonally adjusted data, not calendar adjusted data\n\n$Eurostat$ei_lmhr_m$unit\n     unit                              Unit of measure\n   &lt;char&gt;                                       &lt;char&gt;\n1: PC_ACT Percentage of population in the labour force\n\n\n\n\n\nQuery to filter/select series from a provider’s dataset\n\n\n\nhead(rdb_series(\n  provider = \"Eurostat\",\n  dataset_code = \"ei_lmhr_m\",\n  query = \"United Kingdom\"\n))\n\n$Eurostat\n$Eurostat$ei_lmhr_m\n                     series_code\n                          &lt;char&gt;\n 1: M.PC_ACT.NSA.LM-UN-F-GT25.UK\n 2: M.PC_ACT.NSA.LM-UN-F-LE25.UK\n 3:  M.PC_ACT.NSA.LM-UN-F-TOT.UK\n 4: M.PC_ACT.NSA.LM-UN-M-GT25.UK\n 5: M.PC_ACT.NSA.LM-UN-M-LE25.UK\n 6:  M.PC_ACT.NSA.LM-UN-M-TOT.UK\n 7: M.PC_ACT.NSA.LM-UN-T-GT25.UK\n 8: M.PC_ACT.NSA.LM-UN-T-LE25.UK\n 9:  M.PC_ACT.NSA.LM-UN-T-TOT.UK\n10:  M.PC_ACT.SA.LM-UN-F-GT25.UK\n11:  M.PC_ACT.SA.LM-UN-F-LE25.UK\n12:   M.PC_ACT.SA.LM-UN-F-TOT.UK\n13:  M.PC_ACT.SA.LM-UN-M-GT25.UK\n14:  M.PC_ACT.SA.LM-UN-M-LE25.UK\n15:   M.PC_ACT.SA.LM-UN-M-TOT.UK\n16:  M.PC_ACT.SA.LM-UN-T-GT25.UK\n17:  M.PC_ACT.SA.LM-UN-T-LE25.UK\n18:   M.PC_ACT.SA.LM-UN-T-TOT.UK\n                                                                                                                                                                                                                      series_name\n                                                                                                                                                                                                                           &lt;char&gt;\n 1:  Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - over 25 years - females – United Kingdom\n 2: Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - under 25 years - females – United Kingdom\n 3:                  Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - females – United Kingdom\n 4:    Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - over 25 years - males – United Kingdom\n 5:   Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - under 25 years - males – United Kingdom\n 6:                    Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - males – United Kingdom\n 7:    Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - over 25 years - total – United Kingdom\n 8:   Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - under 25 years - total – United Kingdom\n 9:                    Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - total – United Kingdom\n10:                           Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - over 25 years - females – United Kingdom\n11:                          Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - under 25 years - females – United Kingdom\n12:                                           Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - females – United Kingdom\n13:                             Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - over 25 years - males – United Kingdom\n14:                            Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - under 25 years - males – United Kingdom\n15:                                             Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - males – United Kingdom\n16:                             Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - over 25 years - total – United Kingdom\n17:                            Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - under 25 years - total – United Kingdom\n18:                                             Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - total – United Kingdom\n\n\n\n\n\n\n\n\nExample: Balance of Payments (BOP) for France and Germany from the IMF for Current Account, Total, Net, Euros, Millions, Annual\n\n\n\nOption AOption B:Option C:\n\n\n\n# by ID\nbop &lt;- rdb(ids = c(\"IMF/BOP/A.FR.BCA_BP6_EUR\", \"IMF/BOP/A.DE.BCA_BP6_EUR\"))\nbop %&gt;% count(`Reference Area`)\n\n   Reference Area     n\n           &lt;char&gt; &lt;int&gt;\n1:         France    15\n2:        Germany    26\n\n\n\n\n\n# by Mask\nbop &lt;- rdb(provider = \"IMF\",\n           dataset_code =  \"BOP\",\n           mask = \"A.FR+DE.BCA_BP6_EUR\")\nbop %&gt;% count(`Reference Area`)\n\n   Reference Area     n\n           &lt;char&gt; &lt;int&gt;\n1:         France    15\n2:        Germany    26\n\n\n\n\n⚠️You must specify all dimensions!\n\n# by Dimension\ndim &lt;- list(\n  REF_AREA = c(\"DE\", \"FR\"),\n  INDICATOR = c(\"BCA_BP6_EUR\"),\n  FREQ = \"A\"\n)\nbop &lt;- rdb(provider = \"IMF\", dataset_code = \"BOP\", dimensions = dim)\nbop %&gt;% count(`Reference Area`)\n\n   Reference Area     n\n           &lt;char&gt; &lt;int&gt;\n1:         France    15\n2:        Germany    26\n\n\n\n\n\n\n\n\n# Line plot with color by country\np2 &lt;- ggplot(bop, aes(x = period, y = value, color = `Reference Area`)) +\n  geom_step(linewidth = 1) +\n  labs(\n    title = \"Balance of Payments (BCA, EUR)\",\n    subtitle = \"France vs Germany — Annual\",\n    x = \"Year\",\n    y = \"EUR (Millions)\",\n    caption = \"Source: IMF / DBnomics\"\n  ) +\n  theme_minimal()\np2\n\n\n\n\n\n\n\n\n\n\n\n\nunemp2 &lt;- rdb(ids = c(\"AMECO/ZUTN/EA19.1.0.0.0.ZUTN\", \"Eurostat/une_rt_q/Q.SA.Y15-24.PC_ACT.T.EA19\"))\n\n\n# See which providers and datasets are included\ndim(unemp2)\n\n[1] 122  27\n\nunique(unemp2$provider_code)\n\n[1] \"AMECO\"    \"Eurostat\"\n\nunique(unemp2$dataset_code)\n\n[1] \"ZUTN\"     \"une_rt_q\"\n\nunique(unemp2$series_code)\n\n[1] \"EA19.1.0.0.0.ZUTN\"         \"Q.SA.Y15-24.PC_ACT.T.EA19\"\n\nunique(unemp2$`@frequency`)\n\n[1] \"annual\"    \"quarterly\"\n\nunique(unemp2$`Seasonal adjustment`)\n\n[1] NA                                                    \n[2] \"Seasonally adjusted data, not calendar adjusted data\"\n\n\n\n\n# Summarize coverage and data availability\nunemp2_summary &lt;- unemp2 %&gt;%\n  group_by(series_code) %&gt;%\n  summarize(\n    provider = first(provider_code),\n    dataset = first(dataset_code),\n    start_all = min(period, na.rm = TRUE),\n    end_all = max(period, na.rm = TRUE),\n    start_data = min(period[!is.na(value)]),\n    end_data = max(period[!is.na(value)]),\n    n_obs = sum(!is.na(value)),\n    .groups = \"drop\"\n  )\n\n\n\nunemp2_summary_table &lt;- unemp2_summary |&gt; \ngt() %&gt;%\n  tab_header(\n    title = \"Time Coverage and Non-Missing Observations\",\n    subtitle = \"For Each Series from AMECO and Eurostat\"\n  ) %&gt;%\n  cols_label(\n    series_code = \"Series ID\",\n    provider = \"Provider\",\n    dataset = \"Dataset\",\n    start_all = \"Start (all)\",\n    end_all = \"End (all)\",\n    start_data = \"Start (non-NA)\",\n    end_data = \"End (non-NA)\",\n    n_obs = \"# Obs\"\n  ) %&gt;%\n  fmt_date(\n    columns = c(start_all, end_all, start_data, end_data),\n    date_style = \"iso\"\n  ) %&gt;%\n  tab_options(\n    table.width = pct(100),\n    column_labels.font.weight = \"bold\"\n  )\n\n\n\nunemp2_summary_table\n\n\n\n\n\n\n\nTime Coverage and Non-Missing Observations\n\n\nFor Each Series from AMECO and Eurostat\n\n\nSeries ID\nProvider\nDataset\nStart (all)\nEnd (all)\nStart (non-NA)\nEnd (non-NA)\n# Obs\n\n\n\n\nEA19.1.0.0.0.ZUTN\nAMECO\nZUTN\n1960-01-01\n2026-01-01\n1997-01-01\n2026-01-01\n30\n\n\nQ.SA.Y15-24.PC_ACT.T.EA19\nEurostat\nune_rt_q\n2009-01-01\n2022-07-01\n2009-01-01\n2022-07-01\n55\n\n\n\n\n\n\n\n\n\n# Metadata vectors\nproviders &lt;- unique(unemp2$provider_code)\ndatasets &lt;- unique(unemp2$dataset_code)\nseries_ids &lt;- unique(unemp2$series_code)\n\n\n# Create a label that combines dataset + series ID\nunemp2_clean &lt;- unemp2 %&gt;%\n  drop_na(value) %&gt;%\n  mutate(label = case_when(\n    series_code == \"EA19.1.0.0.0.ZUTN\" ~ \"Total, AMECO\",\n    series_code == \"Q.SA.Y15-24.PC_ACT.T.EA19\" ~ \"Youth (15–24), Eurostat\",\n    TRUE ~ series_code\n  ))\n\n\n\np3 &lt;- ggplot(unemp2_clean, aes(x = period, y = value, color = label)) +\n  geom_line(linewidth = 1) +\n  labs(\n    title = \"Unemployment Rates from Multiple Sources (EA19)\",\n    subtitle = \"AMECO and Eurostat — Different definitions\",\n    x = \"Year\", y = \"Percent\",\n    caption = paste(\"Series IDs:\", paste(unique(unemp2_clean$series_code), collapse = \" | \"))\n  ) +\n  theme_minimal()\np3\n\n\n\n\n\n\n\n\n\n\n\n\nSometimes you need to fetch many if not all dimensions of the data\nYou can wildcard dimension and post-filter\nExample: MFI Interest Rate Statistics from the ECB\n\nStart with a single series (Estonia, mortgage rates)\n\n\n\n\nmir_mortgage_ee &lt;- rdb(\"ECB\", \"MIR\", \"M.EE.B.A2C.A.R.A.2250.EUR.N\")\nunique(mir_mortgage_ee$series_name)\n\n[1] \"Monthly – Estonia – Deposit-taking corporations except the central bank (S.122) – Lending for house purchase excluding revolving loans and overdrafts, convenience and extended credit card debt – Total – Annualised agreed rate (AAR) / Narrowly defined effective rate (NDER) – Total – Households and non-profit institutions serving households (S.14 and S.15) – Euro – New business\"\n\n\n\n\n\n\n\nTo fetch multiple values for a dimension (e.g. countries), just remove the value from that position\n\nExample: remove \"EE\" to fetch all countries (REF_AREA)\n\n\n\n⚠️ This can take a while\n\n# mir_mortgage_ee &lt;- rdb(\"ECB\", \"MIR\", \"M.EE.B.A2C.A.R.A.2250.EUR.N\")\nmir &lt;- rdb(\"ECB\", \"MIR\", \"M..B..A.R.A..EUR.N\")\nunique(mir$REF_AREA)\n\n [1] \"AT\" \"BE\" \"CY\" \"DE\" \"EE\" \"ES\" \"FI\" \"FR\" \"GR\" \"HR\" \"IE\" \"IT\" \"LT\" \"LU\" \"LV\"\n[16] \"MT\" \"NL\" \"PT\" \"SI\" \"SK\" \"U2\"\n\nunique(mir$BS_ITEM)\n\n [1] \"A2A\"  \"A2AC\" \"A2B\"  \"A2BC\" \"A2C\"  \"A2CC\" \"A2D\"  \"A2Z\"  \"A2Z1\" \"A2Z3\"\n[11] \"L21\"  \"L22\"  \"L23\"  \"L24\" \n\nunique(mir$`BS counterpart sector`)\n\n[1] \"Non-Financial corporations (S.11)\"                                           \n[2] \"Households and non-profit institutions serving households (S.14 and S.15)\"   \n[3] \"Households of which sole proprietors and unincorporated partnerships (SP/UP)\"\n[4] \"Non-Financial corporations and Households (S.11 and S.14 and S.15)\"          \n\n\n\n\n\n\n\n\nFilter Estonia, Latvia and Lithuania\nKeep only selected BS items (loan categories)\n\n\n\n# Filter by BS_ITEM and countries\nmir_filtered &lt;- mir %&gt;%\n  filter(\n    REF_AREA %in% c(\"EE\", \"LV\", \"LT\"),\n    BS_ITEM %in% c(\"A2I\", \"A2C\", \"A2B\", \"A2J\", \"A2A\")\n  )\n\n\n\n\n\n\n\n\ncountry_list &lt;- paste(sort(unique(mir_filtered$REF_AREA)), collapse = \", \")\nitem_list &lt;- paste(unique(mir_filtered$BS_ITEM), collapse = \", \")\n\ncaption_text &lt;- paste(\n  \"Source: ECB / DBnomics — Dataset code: MIR\",\n  paste0(\"\\nFiltered: REF_AREA in \", country_list, \"; BS_ITEM in \", item_list)\n)\n\nmir_filtered &lt;- mir_filtered %&gt;%\n  mutate(facet_label = paste0(`BS counterpart sector`, \".\\n\\n\", `Balance sheet item`))\n\np4 &lt;- ggplot(mir_filtered, aes(x = period, y = value, color = REF_AREA)) +\n  geom_line(linewidth = 0.8) +\n  facet_wrap(~ facet_label, labeller = label_wrap_gen(width = 30), ncol = 3) +\n  labs(\n    title = \"Interest Rates for Households and Firms\",\n    subtitle = \"Faceted by Loan Type and Borrower Sector\",\n    x = \"Date\", y = \"Percent\",\n    caption = caption_text\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"bottom\")\np4"
  },
  {
    "objectID": "teaching_materials/page_for_distribution_fetching.html#how-to-fetch-data-from-dbnomics-using-r",
    "href": "teaching_materials/page_for_distribution_fetching.html#how-to-fetch-data-from-dbnomics-using-r",
    "title": "Fetching and Visualizing Official Statistics with R",
    "section": "",
    "text": "DBnomics R client\n\n\n\ninstall.packages(\"rdbnomics\")\nlibrary(rdbnomics)\n\n\n\n\n\n\n📦 Fetching data (rdbnomics)\n🧹 Data wrangling and transformation (tidyverse)\n📊 Visualization (ggplot2, plotly)\n📋 Tabular summaries (gt)\n🧾 Building this presentation (quarto)\n\n\n\nlibrary(quarto)     # for compiling Quarto presentations\nlibrary(rdbnomics)  # for accessing economic data via DBnomics\nlibrary(tidyverse)  # dplyr, ggplot2, readr, etc.\nlibrary(plotly)     # interactive visualizations\nlibrary(gt)         # pretty tables\n\n\n\n\n\n\n\nAssume we know exactly the series ID we want to fetch\n\nUnemployment rate, ILO definition, total, Estonia, from Eurostat\n\n\n\n\nunemp &lt;- rdb(ids = \"Eurostat/ei_lmhr_m/M.PC_ACT.SA.LM-UN-T-TOT.EE\") # fetch data\n\n\n\n\nglimpse(unemp)\n\nRows: 296\nColumns: 22\n$ `@frequency`                      &lt;chr&gt; \"monthly\", \"monthly\", \"monthly\", \"mo…\n$ dataset_code                      &lt;chr&gt; \"ei_lmhr_m\", \"ei_lmhr_m\", \"ei_lmhr_m…\n$ dataset_name                      &lt;chr&gt; \"Unemployment rate (%) - monthly dat…\n$ freq                              &lt;chr&gt; \"M\", \"M\", \"M\", \"M\", \"M\", \"M\", \"M\", \"…\n$ geo                               &lt;chr&gt; \"EE\", \"EE\", \"EE\", \"EE\", \"EE\", \"EE\", …\n$ `Geopolitical entity (reporting)` &lt;chr&gt; \"Estonia\", \"Estonia\", \"Estonia\", \"Es…\n$ indexed_at                        &lt;dttm&gt; 2024-10-31 15:26:51, 2024-10-31 15:…\n$ indic                             &lt;chr&gt; \"LM-UN-T-TOT\", \"LM-UN-T-TOT\", \"LM-UN…\n$ Indicator                         &lt;chr&gt; \"Unemployment according to ILO defin…\n$ observations_attributes           &lt;chr&gt; \"OBS_FLAG,\", \"OBS_FLAG,\", \"OBS_FLAG,…\n$ original_period                   &lt;chr&gt; \"2000-02\", \"2000-03\", \"2000-04\", \"20…\n$ original_value                    &lt;chr&gt; \"14.9\", \"14.2\", \"14.5\", \"13.9\", \"14\"…\n$ period                            &lt;date&gt; 2000-02-01, 2000-03-01, 2000-04-01,…\n$ provider_code                     &lt;chr&gt; \"Eurostat\", \"Eurostat\", \"Eurostat\", …\n$ s_adj                             &lt;chr&gt; \"SA\", \"SA\", \"SA\", \"SA\", \"SA\", \"SA\", …\n$ `Seasonal adjustment`             &lt;chr&gt; \"Seasonally adjusted data, not calen…\n$ series_code                       &lt;chr&gt; \"M.PC_ACT.SA.LM-UN-T-TOT.EE\", \"M.PC_…\n$ series_name                       &lt;chr&gt; \"Monthly – Percentage of population …\n$ `Time frequency`                  &lt;chr&gt; \"Monthly\", \"Monthly\", \"Monthly\", \"Mo…\n$ unit                              &lt;chr&gt; \"PC_ACT\", \"PC_ACT\", \"PC_ACT\", \"PC_AC…\n$ `Unit of measure`                 &lt;chr&gt; \"Percentage of population in the lab…\n$ value                             &lt;dbl&gt; 14.9, 14.2, 14.5, 13.9, 14.0, 13.9, …\n\ncolnames(unemp)\n\n [1] \"@frequency\"                      \"dataset_code\"                   \n [3] \"dataset_name\"                    \"freq\"                           \n [5] \"geo\"                             \"Geopolitical entity (reporting)\"\n [7] \"indexed_at\"                      \"indic\"                          \n [9] \"Indicator\"                       \"observations_attributes\"        \n[11] \"original_period\"                 \"original_value\"                 \n[13] \"period\"                          \"provider_code\"                  \n[15] \"s_adj\"                           \"Seasonal adjustment\"            \n[17] \"series_code\"                     \"series_name\"                    \n[19] \"Time frequency\"                  \"unit\"                           \n[21] \"Unit of measure\"                 \"value\"                          \n\n\n\n\n# Extract source and series ID from the metadata\n(source_name &lt;- unique(unemp$dataset_code))  \n\n[1] \"ei_lmhr_m\"\n\n(provider_code &lt;- unique(unemp$provider_code))  \n\n[1] \"Eurostat\"\n\n(country_name &lt;- unique(unemp$`Geopolitical entity (reporting)`)  )\n\n[1] \"Estonia\"\n\n(series_id &lt;- unique(unemp$series_code))  \n\n[1] \"M.PC_ACT.SA.LM-UN-T-TOT.EE\"\n\n\n\n\n# Plot the data\np1 &lt;- ggplot(unemp, aes(x = period, y = value)) +\n  geom_line(color = \"steelblue\", linewidth = 1) +\n  labs(\n    title = paste(\"Unemployment Rate in \", country_name),\n    subtitle = paste(\"Monthly, seasonally adjusted —\", provider_code),\n    x = \"Date\", y = \"Percent\",\n    caption = paste(\"Source:\", provider_code, \"| Dataset:\", source_name, \"| ID:\", series_id)\n  ) +\n  theme_minimal()\np1\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplotly(p1)\n\n\n\n\n\n\n\n\n\n\nGo to the DBnomics website\n\nSearch directly for a series or pick a provider\nSearch for the data you want (dataset_code)\nClick on the series (series_code)\nCopy the series ID from the URL\n\n\n\n\nShow the available datasets of a provider:\n\n\n\nhead(rdb_datasets(provider_code = \"Eurostat\"))\n\n$Eurostat\n              code\n            &lt;char&gt;\n   1:   aact_ali01\n   2:   aact_ali02\n   3:   aact_eaa01\n   4:   aact_eaa02\n   5:   aact_eaa03\n  ---             \n8289: yth_empl_120\n8290: yth_empl_130\n8291: yth_empl_130\n8292: yth_empl_140\n8293: yth_empl_140\n                                                                                        name\n                                                                                      &lt;char&gt;\n   1:       Agricultural labour input statistics: absolute figures (1 000 annual work units)\n   2:                                          Agricultural labour input statistics: indices\n   3:                           Economic accounts for agriculture - values at current prices\n   4:                               Economic accounts for agriculture - values at n-1 prices\n   5:             Economic accounts for agriculture - values at constant prices (2015 = 100)\n  ---                                                                                       \n8289:                 Youth long-term unemployment rate (12 months or longer) by sex and age\n8290: Youth long-term unemployment rate (12 months or longer) by sex, age and NUTS 2 regions\n8291:  Youth long-term unemployment rate (12 months or longer) by sex, age and NUTS 2 region\n8292:                                Youth unemployment ratio by sex, age and NUTS 2 regions\n8293:                                 Youth unemployment ratio by sex, age and NUTS 2 region\n\n\n\n\n\nShow the dimensions of a dataset:\n\n\n\nhead(rdb_dimensions(provider_code = \"Eurostat\", dataset_code = \"ei_lmhr_m\"))\n\n$Eurostat\n$Eurostat$ei_lmhr_m\n$Eurostat$ei_lmhr_m$freq\n     freq Time frequency\n   &lt;char&gt;         &lt;char&gt;\n1:      M        Monthly\n\n$Eurostat$ei_lmhr_m$geo\n          geo           Geopolitical entity (reporting)\n       &lt;char&gt;                                    &lt;char&gt;\n 1:        AT                                   Austria\n 2:        BA                    Bosnia and Herzegovina\n 3:        BE                                   Belgium\n 4:        BG                                  Bulgaria\n 5:        CH                               Switzerland\n 6:        CY                                    Cyprus\n 7:        CZ                                   Czechia\n 8:        DE                                   Germany\n 9:        DK                                   Denmark\n10:      EA20      Euro area – 20 countries (from 2023)\n11:        EE                                   Estonia\n12:        EL                                    Greece\n13:        ES                                     Spain\n14: EU27_2020 European Union - 27 countries (from 2020)\n15:        FI                                   Finland\n16:        FR                                    France\n17:        HR                                   Croatia\n18:        HU                                   Hungary\n19:        IE                                   Ireland\n20:        IS                                   Iceland\n21:        IT                                     Italy\n22:        JP                                     Japan\n23:        LT                                 Lithuania\n24:        LU                                Luxembourg\n25:        LV                                    Latvia\n26:        MT                                     Malta\n27:        NL                               Netherlands\n28:        NO                                    Norway\n29:        PL                                    Poland\n30:        PT                                  Portugal\n31:        RO                                   Romania\n32:        SE                                    Sweden\n33:        SI                                  Slovenia\n34:        SK                                  Slovakia\n35:        TR                                   Türkiye\n36:        UK                            United Kingdom\n37:        US                             United States\n          geo           Geopolitical entity (reporting)\n\n$Eurostat$ei_lmhr_m$indic\n          indic\n         &lt;char&gt;\n1: LM-UN-F-GT25\n2: LM-UN-F-LE25\n3:  LM-UN-F-TOT\n4: LM-UN-M-GT25\n5: LM-UN-M-LE25\n6:  LM-UN-M-TOT\n7: LM-UN-T-GT25\n8: LM-UN-T-LE25\n9:  LM-UN-T-TOT\n                                                             Indicator\n                                                                &lt;char&gt;\n1:  Unemployment according to ILO definition - over 25 years - females\n2: Unemployment according to ILO definition - under 25 years - females\n3:                  Unemployment according to ILO definition - females\n4:    Unemployment according to ILO definition - over 25 years - males\n5:   Unemployment according to ILO definition - under 25 years - males\n6:                    Unemployment according to ILO definition - males\n7:    Unemployment according to ILO definition - over 25 years - total\n8:   Unemployment according to ILO definition - under 25 years - total\n9:                    Unemployment according to ILO definition - total\n\n$Eurostat$ei_lmhr_m$s_adj\n    s_adj\n   &lt;char&gt;\n1:    NSA\n2:     SA\n                                                             Seasonal adjustment\n                                                                          &lt;char&gt;\n1: Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data)\n2:                          Seasonally adjusted data, not calendar adjusted data\n\n$Eurostat$ei_lmhr_m$unit\n     unit                              Unit of measure\n   &lt;char&gt;                                       &lt;char&gt;\n1: PC_ACT Percentage of population in the labour force\n\n\n\n\n\nQuery to filter/select series from a provider’s dataset\n\n\n\nhead(rdb_series(\n  provider = \"Eurostat\",\n  dataset_code = \"ei_lmhr_m\",\n  query = \"United Kingdom\"\n))\n\n$Eurostat\n$Eurostat$ei_lmhr_m\n                     series_code\n                          &lt;char&gt;\n 1: M.PC_ACT.NSA.LM-UN-F-GT25.UK\n 2: M.PC_ACT.NSA.LM-UN-F-LE25.UK\n 3:  M.PC_ACT.NSA.LM-UN-F-TOT.UK\n 4: M.PC_ACT.NSA.LM-UN-M-GT25.UK\n 5: M.PC_ACT.NSA.LM-UN-M-LE25.UK\n 6:  M.PC_ACT.NSA.LM-UN-M-TOT.UK\n 7: M.PC_ACT.NSA.LM-UN-T-GT25.UK\n 8: M.PC_ACT.NSA.LM-UN-T-LE25.UK\n 9:  M.PC_ACT.NSA.LM-UN-T-TOT.UK\n10:  M.PC_ACT.SA.LM-UN-F-GT25.UK\n11:  M.PC_ACT.SA.LM-UN-F-LE25.UK\n12:   M.PC_ACT.SA.LM-UN-F-TOT.UK\n13:  M.PC_ACT.SA.LM-UN-M-GT25.UK\n14:  M.PC_ACT.SA.LM-UN-M-LE25.UK\n15:   M.PC_ACT.SA.LM-UN-M-TOT.UK\n16:  M.PC_ACT.SA.LM-UN-T-GT25.UK\n17:  M.PC_ACT.SA.LM-UN-T-LE25.UK\n18:   M.PC_ACT.SA.LM-UN-T-TOT.UK\n                                                                                                                                                                                                                      series_name\n                                                                                                                                                                                                                           &lt;char&gt;\n 1:  Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - over 25 years - females – United Kingdom\n 2: Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - under 25 years - females – United Kingdom\n 3:                  Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - females – United Kingdom\n 4:    Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - over 25 years - males – United Kingdom\n 5:   Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - under 25 years - males – United Kingdom\n 6:                    Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - males – United Kingdom\n 7:    Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - over 25 years - total – United Kingdom\n 8:   Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - under 25 years - total – United Kingdom\n 9:                    Monthly – Percentage of population in the labour force – Unadjusted data (i.e. neither seasonally adjusted nor calendar adjusted data) – Unemployment according to ILO definition - total – United Kingdom\n10:                           Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - over 25 years - females – United Kingdom\n11:                          Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - under 25 years - females – United Kingdom\n12:                                           Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - females – United Kingdom\n13:                             Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - over 25 years - males – United Kingdom\n14:                            Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - under 25 years - males – United Kingdom\n15:                                             Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - males – United Kingdom\n16:                             Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - over 25 years - total – United Kingdom\n17:                            Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - under 25 years - total – United Kingdom\n18:                                             Monthly – Percentage of population in the labour force – Seasonally adjusted data, not calendar adjusted data – Unemployment according to ILO definition - total – United Kingdom"
  },
  {
    "objectID": "teaching_materials/page_for_distribution_fetching.html#fetch-two-or-more-series-at-once",
    "href": "teaching_materials/page_for_distribution_fetching.html#fetch-two-or-more-series-at-once",
    "title": "Fetching and Visualizing Official Statistics with R",
    "section": "",
    "text": "Example: Balance of Payments (BOP) for France and Germany from the IMF for Current Account, Total, Net, Euros, Millions, Annual\n\n\n\nOption AOption B:Option C:\n\n\n\n# by ID\nbop &lt;- rdb(ids = c(\"IMF/BOP/A.FR.BCA_BP6_EUR\", \"IMF/BOP/A.DE.BCA_BP6_EUR\"))\nbop %&gt;% count(`Reference Area`)\n\n   Reference Area     n\n           &lt;char&gt; &lt;int&gt;\n1:         France    15\n2:        Germany    26\n\n\n\n\n\n# by Mask\nbop &lt;- rdb(provider = \"IMF\",\n           dataset_code =  \"BOP\",\n           mask = \"A.FR+DE.BCA_BP6_EUR\")\nbop %&gt;% count(`Reference Area`)\n\n   Reference Area     n\n           &lt;char&gt; &lt;int&gt;\n1:         France    15\n2:        Germany    26\n\n\n\n\n⚠️You must specify all dimensions!\n\n# by Dimension\ndim &lt;- list(\n  REF_AREA = c(\"DE\", \"FR\"),\n  INDICATOR = c(\"BCA_BP6_EUR\"),\n  FREQ = \"A\"\n)\nbop &lt;- rdb(provider = \"IMF\", dataset_code = \"BOP\", dimensions = dim)\nbop %&gt;% count(`Reference Area`)\n\n   Reference Area     n\n           &lt;char&gt; &lt;int&gt;\n1:         France    15\n2:        Germany    26\n\n\n\n\n\n\n\n\n# Line plot with color by country\np2 &lt;- ggplot(bop, aes(x = period, y = value, color = `Reference Area`)) +\n  geom_step(linewidth = 1) +\n  labs(\n    title = \"Balance of Payments (BCA, EUR)\",\n    subtitle = \"France vs Germany — Annual\",\n    x = \"Year\",\n    y = \"EUR (Millions)\",\n    caption = \"Source: IMF / DBnomics\"\n  ) +\n  theme_minimal()\np2"
  },
  {
    "objectID": "teaching_materials/page_for_distribution_fetching.html#fetch-two-series-from-different-datasets-of-different-providers",
    "href": "teaching_materials/page_for_distribution_fetching.html#fetch-two-series-from-different-datasets-of-different-providers",
    "title": "Fetching and Visualizing Official Statistics with R",
    "section": "",
    "text": "unemp2 &lt;- rdb(ids = c(\"AMECO/ZUTN/EA19.1.0.0.0.ZUTN\", \"Eurostat/une_rt_q/Q.SA.Y15-24.PC_ACT.T.EA19\"))\n\n\n# See which providers and datasets are included\ndim(unemp2)\n\n[1] 122  27\n\nunique(unemp2$provider_code)\n\n[1] \"AMECO\"    \"Eurostat\"\n\nunique(unemp2$dataset_code)\n\n[1] \"ZUTN\"     \"une_rt_q\"\n\nunique(unemp2$series_code)\n\n[1] \"EA19.1.0.0.0.ZUTN\"         \"Q.SA.Y15-24.PC_ACT.T.EA19\"\n\nunique(unemp2$`@frequency`)\n\n[1] \"annual\"    \"quarterly\"\n\nunique(unemp2$`Seasonal adjustment`)\n\n[1] NA                                                    \n[2] \"Seasonally adjusted data, not calendar adjusted data\"\n\n\n\n\n# Summarize coverage and data availability\nunemp2_summary &lt;- unemp2 %&gt;%\n  group_by(series_code) %&gt;%\n  summarize(\n    provider = first(provider_code),\n    dataset = first(dataset_code),\n    start_all = min(period, na.rm = TRUE),\n    end_all = max(period, na.rm = TRUE),\n    start_data = min(period[!is.na(value)]),\n    end_data = max(period[!is.na(value)]),\n    n_obs = sum(!is.na(value)),\n    .groups = \"drop\"\n  )\n\n\n\nunemp2_summary_table &lt;- unemp2_summary |&gt; \ngt() %&gt;%\n  tab_header(\n    title = \"Time Coverage and Non-Missing Observations\",\n    subtitle = \"For Each Series from AMECO and Eurostat\"\n  ) %&gt;%\n  cols_label(\n    series_code = \"Series ID\",\n    provider = \"Provider\",\n    dataset = \"Dataset\",\n    start_all = \"Start (all)\",\n    end_all = \"End (all)\",\n    start_data = \"Start (non-NA)\",\n    end_data = \"End (non-NA)\",\n    n_obs = \"# Obs\"\n  ) %&gt;%\n  fmt_date(\n    columns = c(start_all, end_all, start_data, end_data),\n    date_style = \"iso\"\n  ) %&gt;%\n  tab_options(\n    table.width = pct(100),\n    column_labels.font.weight = \"bold\"\n  )\n\n\n\nunemp2_summary_table\n\n\n\n\n\n\n\nTime Coverage and Non-Missing Observations\n\n\nFor Each Series from AMECO and Eurostat\n\n\nSeries ID\nProvider\nDataset\nStart (all)\nEnd (all)\nStart (non-NA)\nEnd (non-NA)\n# Obs\n\n\n\n\nEA19.1.0.0.0.ZUTN\nAMECO\nZUTN\n1960-01-01\n2026-01-01\n1997-01-01\n2026-01-01\n30\n\n\nQ.SA.Y15-24.PC_ACT.T.EA19\nEurostat\nune_rt_q\n2009-01-01\n2022-07-01\n2009-01-01\n2022-07-01\n55\n\n\n\n\n\n\n\n\n\n# Metadata vectors\nproviders &lt;- unique(unemp2$provider_code)\ndatasets &lt;- unique(unemp2$dataset_code)\nseries_ids &lt;- unique(unemp2$series_code)\n\n\n# Create a label that combines dataset + series ID\nunemp2_clean &lt;- unemp2 %&gt;%\n  drop_na(value) %&gt;%\n  mutate(label = case_when(\n    series_code == \"EA19.1.0.0.0.ZUTN\" ~ \"Total, AMECO\",\n    series_code == \"Q.SA.Y15-24.PC_ACT.T.EA19\" ~ \"Youth (15–24), Eurostat\",\n    TRUE ~ series_code\n  ))\n\n\n\np3 &lt;- ggplot(unemp2_clean, aes(x = period, y = value, color = label)) +\n  geom_line(linewidth = 1) +\n  labs(\n    title = \"Unemployment Rates from Multiple Sources (EA19)\",\n    subtitle = \"AMECO and Eurostat — Different definitions\",\n    x = \"Year\", y = \"Percent\",\n    caption = paste(\"Series IDs:\", paste(unique(unemp2_clean$series_code), collapse = \" | \"))\n  ) +\n  theme_minimal()\np3"
  },
  {
    "objectID": "teaching_materials/page_for_distribution_fetching.html#fetch-large-amounts-of-data",
    "href": "teaching_materials/page_for_distribution_fetching.html#fetch-large-amounts-of-data",
    "title": "Fetching and Visualizing Official Statistics with R",
    "section": "",
    "text": "Sometimes you need to fetch many if not all dimensions of the data\nYou can wildcard dimension and post-filter\nExample: MFI Interest Rate Statistics from the ECB\n\nStart with a single series (Estonia, mortgage rates)\n\n\n\n\nmir_mortgage_ee &lt;- rdb(\"ECB\", \"MIR\", \"M.EE.B.A2C.A.R.A.2250.EUR.N\")\nunique(mir_mortgage_ee$series_name)\n\n[1] \"Monthly – Estonia – Deposit-taking corporations except the central bank (S.122) – Lending for house purchase excluding revolving loans and overdrafts, convenience and extended credit card debt – Total – Annualised agreed rate (AAR) / Narrowly defined effective rate (NDER) – Total – Households and non-profit institutions serving households (S.14 and S.15) – Euro – New business\"\n\n\n\n\n\n\n\nTo fetch multiple values for a dimension (e.g. countries), just remove the value from that position\n\nExample: remove \"EE\" to fetch all countries (REF_AREA)\n\n\n\n⚠️ This can take a while\n\n# mir_mortgage_ee &lt;- rdb(\"ECB\", \"MIR\", \"M.EE.B.A2C.A.R.A.2250.EUR.N\")\nmir &lt;- rdb(\"ECB\", \"MIR\", \"M..B..A.R.A..EUR.N\")\nunique(mir$REF_AREA)\n\n [1] \"AT\" \"BE\" \"CY\" \"DE\" \"EE\" \"ES\" \"FI\" \"FR\" \"GR\" \"HR\" \"IE\" \"IT\" \"LT\" \"LU\" \"LV\"\n[16] \"MT\" \"NL\" \"PT\" \"SI\" \"SK\" \"U2\"\n\nunique(mir$BS_ITEM)\n\n [1] \"A2A\"  \"A2AC\" \"A2B\"  \"A2BC\" \"A2C\"  \"A2CC\" \"A2D\"  \"A2Z\"  \"A2Z1\" \"A2Z3\"\n[11] \"L21\"  \"L22\"  \"L23\"  \"L24\" \n\nunique(mir$`BS counterpart sector`)\n\n[1] \"Non-Financial corporations (S.11)\"                                           \n[2] \"Households and non-profit institutions serving households (S.14 and S.15)\"   \n[3] \"Households of which sole proprietors and unincorporated partnerships (SP/UP)\"\n[4] \"Non-Financial corporations and Households (S.11 and S.14 and S.15)\"          \n\n\n\n\n\n\n\n\nFilter Estonia, Latvia and Lithuania\nKeep only selected BS items (loan categories)\n\n\n\n# Filter by BS_ITEM and countries\nmir_filtered &lt;- mir %&gt;%\n  filter(\n    REF_AREA %in% c(\"EE\", \"LV\", \"LT\"),\n    BS_ITEM %in% c(\"A2I\", \"A2C\", \"A2B\", \"A2J\", \"A2A\")\n  )\n\n\n\n\n\n\n\n\ncountry_list &lt;- paste(sort(unique(mir_filtered$REF_AREA)), collapse = \", \")\nitem_list &lt;- paste(unique(mir_filtered$BS_ITEM), collapse = \", \")\n\ncaption_text &lt;- paste(\n  \"Source: ECB / DBnomics — Dataset code: MIR\",\n  paste0(\"\\nFiltered: REF_AREA in \", country_list, \"; BS_ITEM in \", item_list)\n)\n\nmir_filtered &lt;- mir_filtered %&gt;%\n  mutate(facet_label = paste0(`BS counterpart sector`, \".\\n\\n\", `Balance sheet item`))\n\np4 &lt;- ggplot(mir_filtered, aes(x = period, y = value, color = REF_AREA)) +\n  geom_line(linewidth = 0.8) +\n  facet_wrap(~ facet_label, labeller = label_wrap_gen(width = 30), ncol = 3) +\n  labs(\n    title = \"Interest Rates for Households and Firms\",\n    subtitle = \"Faceted by Loan Type and Borrower Sector\",\n    x = \"Date\", y = \"Percent\",\n    caption = caption_text\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"bottom\")\np4"
  },
  {
    "objectID": "teaching_materials/cleaning.html",
    "href": "teaching_materials/cleaning.html",
    "title": "Incremental Test",
    "section": "",
    "text": "First bullet\nSecond bullet\nThird bullet"
  },
  {
    "objectID": "teaching_materials/intro.html",
    "href": "teaching_materials/intro.html",
    "title": "Automating Data Workflows",
    "section": "",
    "text": "A short hands-on course using real data from:\n\nStatistics Estonia\n\nECB / Euro Area via DBnomics"
  },
  {
    "objectID": "teaching_materials/presentation_for_distribution_fetching.html#how-to-fetch-data-from-dbnomics-using-r",
    "href": "teaching_materials/presentation_for_distribution_fetching.html#how-to-fetch-data-from-dbnomics-using-r",
    "title": "Fetching and Visualizing Official Statistics with R",
    "section": "How to fetch data (from DBnomics using R)",
    "text": "How to fetch data (from DBnomics using R)\n\nDBnomics R client\n\n\n\ninstall.packages(\"rdbnomics\")\nlibrary(rdbnomics)"
  },
  {
    "objectID": "teaching_materials/presentation_for_distribution_fetching.html#fetch-two-or-more-series-at-once",
    "href": "teaching_materials/presentation_for_distribution_fetching.html#fetch-two-or-more-series-at-once",
    "title": "Fetching and Visualizing Official Statistics with R",
    "section": "Fetch two (or more) series at once",
    "text": "Fetch two (or more) series at once\n\nExample: Balance of Payments (BOP) for France and Germany from the IMF for Current Account, Total, Net, Euros, Millions, Annual\n\n\n\nOption AOption B:Option C:\n\n\n\n# by ID\nbop &lt;- rdb(ids = c(\"IMF/BOP/A.FR.BCA_BP6_EUR\", \"IMF/BOP/A.DE.BCA_BP6_EUR\"))\nbop %&gt;% count(`Reference Area`)\n\n   Reference Area     n\n           &lt;char&gt; &lt;int&gt;\n1:         France    15\n2:        Germany    26\n\n\n\n\n\n# by Mask\nbop &lt;- rdb(provider = \"IMF\",\n           dataset_code =  \"BOP\",\n           mask = \"A.FR+DE.BCA_BP6_EUR\")\nbop %&gt;% count(`Reference Area`)\n\n   Reference Area     n\n           &lt;char&gt; &lt;int&gt;\n1:         France    15\n2:        Germany    26\n\n\n\n\n⚠️You must specify all dimensions!\n\n# by Dimension\ndim &lt;- list(\n  REF_AREA = c(\"DE\", \"FR\"),\n  INDICATOR = c(\"BCA_BP6_EUR\"),\n  FREQ = \"A\"\n)\nbop &lt;- rdb(provider = \"IMF\", dataset_code = \"BOP\", dimensions = dim)\nbop %&gt;% count(`Reference Area`)\n\n   Reference Area     n\n           &lt;char&gt; &lt;int&gt;\n1:         France    15\n2:        Germany    26"
  },
  {
    "objectID": "teaching_materials/presentation_for_distribution_fetching.html#fetch-two-series-from-different-datasets-of-different-providers",
    "href": "teaching_materials/presentation_for_distribution_fetching.html#fetch-two-series-from-different-datasets-of-different-providers",
    "title": "Fetching and Visualizing Official Statistics with R",
    "section": "Fetch two series from different datasets of different providers",
    "text": "Fetch two series from different datasets of different providers\n\nunemp2 &lt;- rdb(ids = c(\"AMECO/ZUTN/EA19.1.0.0.0.ZUTN\", \"Eurostat/une_rt_q/Q.SA.Y15-24.PC_ACT.T.EA19\"))\n\n\n# See which providers and datasets are included\ndim(unemp2)\n\n[1] 122  27\n\nunique(unemp2$provider_code)\n\n[1] \"AMECO\"    \"Eurostat\"\n\nunique(unemp2$dataset_code)\n\n[1] \"ZUTN\"     \"une_rt_q\"\n\nunique(unemp2$series_code)\n\n[1] \"EA19.1.0.0.0.ZUTN\"         \"Q.SA.Y15-24.PC_ACT.T.EA19\"\n\nunique(unemp2$`@frequency`)\n\n[1] \"annual\"    \"quarterly\"\n\nunique(unemp2$`Seasonal adjustment`)\n\n[1] NA                                                    \n[2] \"Seasonally adjusted data, not calendar adjusted data\""
  },
  {
    "objectID": "teaching_materials/presentation_for_distribution_fetching.html#fetch-large-amounts-of-data",
    "href": "teaching_materials/presentation_for_distribution_fetching.html#fetch-large-amounts-of-data",
    "title": "Fetching and Visualizing Official Statistics with R",
    "section": "Fetch large amounts of data",
    "text": "Fetch large amounts of data\n\nSometimes you need to fetch many if not all dimensions of the data\nYou can wildcard dimension and post-filter\nExample: MFI Interest Rate Statistics from the ECB\n\nStart with a single series (Estonia, mortgage rates)\n\n\n\n\nmir_mortgage_ee &lt;- rdb(\"ECB\", \"MIR\", \"M.EE.B.A2C.A.R.A.2250.EUR.N\")\nunique(mir_mortgage_ee$series_name)\n\n[1] \"Monthly – Estonia – Deposit-taking corporations except the central bank (S.122) – Lending for house purchase excluding revolving loans and overdrafts, convenience and extended credit card debt – Total – Annualised agreed rate (AAR) / Narrowly defined effective rate (NDER) – Total – Households and non-profit institutions serving households (S.14 and S.15) – Euro – New business\""
  },
  {
    "objectID": "teaching_materials/page_for_distribution_fetching.html#welcome",
    "href": "teaching_materials/page_for_distribution_fetching.html#welcome",
    "title": "Automating Data Workflows",
    "section": "",
    "text": "A short hands-on course using real data from:\n\nStatistics Estonia\n\nECB / Euro Area via DBnomics"
  },
  {
    "objectID": "teaching_materials/page_for_distribution_fetching.html#why-write-code-instead-of-using-excel",
    "href": "teaching_materials/page_for_distribution_fetching.html#why-write-code-instead-of-using-excel",
    "title": "Automating Data Workflows",
    "section": "Why Write Code Instead of Using Excel?",
    "text": "Why Write Code Instead of Using Excel?\n\n✅ Repeatability: Run once, use forever.\n\n✅ Transparency: All steps are visible in the script.\n\n✅ Scalability: Works for 1 or 100 datasets.\n\n✅ Fewer Errors: Avoid manual mistakes.\n\n✅ Version Control: Track changes, collaborate easily."
  },
  {
    "objectID": "teaching_materials/page_for_distribution_intro.html",
    "href": "teaching_materials/page_for_distribution_intro.html",
    "title": "Automating Data Workflows",
    "section": "",
    "text": "Welcome to the Data Automatisation Course! In this hands-on workshop, you’ll learn how to fetch, clean, and visualize official statistics using R.\n\n\n\nMorning (09:30–12:00)\n- Introduction & Motivation\n- APIs and official statistics\n- Fetching data with pxweb and rdbnomics\nLunch Break\nAfternoon (13:00–15:30)\n- Data wrangling with tidyverse\n- Visualization and reporting with quarto\n- Wrap-up & Q&A\n\n\n\n\nBy the end of this course, you will be able to:\n\nAccess and explore data from Statistics Estonia and DBnomics\nAutomate data downloads and updates\nBuild clean, reproducible reports with R and Quarto\n\n\n\n\n\n\nR and RStudio\nQuarto\nTidyverse\nAPIs (rdbnomics, pxweb)\n\n\n\n\n\n✅ Repeatability: Run once, use forever.\n\n✅ Transparency: All steps are visible in the script.\n\n✅ Scalability: Works for 1 or 100 datasets.\n\n✅ Fewer Errors: Avoid manual mistakes."
  },
  {
    "objectID": "teaching_materials/page_for_distribution_intro.html#welcome",
    "href": "teaching_materials/page_for_distribution_intro.html#welcome",
    "title": "Automating Data Workflows",
    "section": "",
    "text": "A short hands-on course using real data from:\n\nStatistics Estonia\n\nECB / Euro Area via DBnomics"
  },
  {
    "objectID": "teaching_materials/page_for_distribution_intro.html#why-write-code-instead-of-using-excel",
    "href": "teaching_materials/page_for_distribution_intro.html#why-write-code-instead-of-using-excel",
    "title": "Automating Data Workflows",
    "section": "",
    "text": "✅ Repeatability: Run once, use forever.\n\n✅ Transparency: All steps are visible in the script.\n\n✅ Scalability: Works for 1 or 100 datasets.\n\n✅ Fewer Errors: Avoid manual mistakes."
  },
  {
    "objectID": "home_for_distribution_intro.html",
    "href": "home_for_distribution_intro.html",
    "title": "Data automatisation course",
    "section": "",
    "text": "📅 April 17, 2025 – Eesti Pank\n👨‍🏫 Instructors: Alari & Nicolas\nThis short course introduces tools and techniques for automating the collection and visualization of official statistics using R.\n\n\n\nCourse Introduction\nCode Examples\n\n\n\n\nThe views expressed in this course and its materials are those of the instructors and do not necessarily reflect the official position of Eesti Pank.\nAll examples and code provided are for educational purposes only."
  },
  {
    "objectID": "home_for_distribution_intro.html#quick-links",
    "href": "home_for_distribution_intro.html#quick-links",
    "title": "Data automatisation course",
    "section": "",
    "text": "Course Introduction\nCode Examples"
  },
  {
    "objectID": "teaching_materials/page_for_distribution_intro.html#agenda",
    "href": "teaching_materials/page_for_distribution_intro.html#agenda",
    "title": "Automating Data Workflows",
    "section": "",
    "text": "Morning (09:30–12:00)\n- Introduction & Motivation\n- APIs and official statistics\n- Fetching data with pxweb and rdbnomics\nLunch Break\nAfternoon (13:00–15:30)\n- Data wrangling with tidyverse\n- Visualization and reporting with quarto\n- Wrap-up & Q&A"
  },
  {
    "objectID": "teaching_materials/page_for_distribution_intro.html#learning-goals",
    "href": "teaching_materials/page_for_distribution_intro.html#learning-goals",
    "title": "Automating Data Workflows",
    "section": "",
    "text": "By the end of this course, you will be able to:\n\nAccess and explore data from Statistics Estonia and DBnomics\nAutomate data downloads and updates\nBuild clean, reproducible reports with R and Quarto"
  },
  {
    "objectID": "teaching_materials/page_for_distribution_intro.html#tools-well-use",
    "href": "teaching_materials/page_for_distribution_intro.html#tools-well-use",
    "title": "Automating Data Workflows",
    "section": "",
    "text": "R and RStudio\nQuarto\nTidyverse\nAPIs (rdbnomics, pxweb)"
  },
  {
    "objectID": "home_for_distribution_intro.html#disclaimer",
    "href": "home_for_distribution_intro.html#disclaimer",
    "title": "Data automatisation course",
    "section": "",
    "text": "The views expressed in this course and its materials are those of the instructors and do not necessarily reflect the official position of Eesti Pank.\nAll examples and code provided are for educational purposes only."
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "This short course, organized by Eesti Pank, introduces techniques for automating the collection, processing, and visualization of official statistics using R.\nIt is intended for participants who work with statistical data and are interested in streamlining their workflows through reproducible code and automated reporting.\n\n\n\nThe views expressed in this course and its materials are those of the instructors and do not necessarily reflect the official position of Eesti Pank.\nAll examples and code provided are for educational purposes only."
  },
  {
    "objectID": "about.html#disclaimer",
    "href": "about.html#disclaimer",
    "title": "About",
    "section": "",
    "text": "The views expressed in this course and its materials are those of the instructors and do not necessarily reflect the official position of Eesti Pank.\nAll examples and code provided are for educational purposes only."
  }
]